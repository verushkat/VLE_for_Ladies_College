!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("rxjs"),require("rxjs/operators"),require("@angular/common/http"),require("rxjs/webSocket")):"function"==typeof define&&define.amd?define("ornamentum",["exports","@angular/core","@angular/common","@angular/forms","rxjs","rxjs/operators","@angular/common/http","rxjs/webSocket"],t):t((e=e||self).ornamentum={},e.ng.core,e.ng.common,e.ng.forms,e.Rx,e.rxjs.operators,e.ng.common.http,e.rxjs.webSocket)}(this,function(e,t,n,i,o,r,a,c){"use strict";var s=function(){return(s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function l(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function d(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}var u=new t.InjectionToken("dataTableConfig"),h=function(){function e(e){this.dataTableConfig=e,this.persistTableState=!1,this.storageMode="session",this.multiColumnSortable=!1,this.showHeader=!1,this.title="",this.width=void 0,this.minContentHeight=200,this.minContentWidth=void 0,this.contentHeight=void 0,this.pageable=!1,this.loadOnScroll=!1,this.loadViewDistanceRatio=1,this.showIndexColumn=!1,this.indexColumnTitle="#",this.rowSelectable=!1,this.selectMode="single",this.showRowSelectCheckbox=!0,this.showRowSelectAllCheckbox=!1,this.showSubstituteRows=!1,this.expandableRows=!1,this.selectOnRowClick=!1,this.expandOnRowClick=!1,this.autoFetch=!0,this.showLoadingSpinner=!0,this.selectTrackBy="id",this.filterDebounceTime=500,this.filterDebounce=!0,this.showRefreshButton=!1,this.showColumnSelector=!1,this.columnSelectorWidth=240,this.expanderColumnWidth=30,this.indexColumnWidth=30,this.selectionColumnWidth=30,this.showRowExpandLoadingSpinner=!1,this.offset=0,this.limit=10,this.maxLimit=100,this.stateKeyPrefix="grid_state_",this.baseTranslations={noDataMessage:{header:"Whoops!",body:"No data to display. Added data will appear here."},pagination:{limit:"Limit:",rangeKey:"Results:",rangeSeparator:"of",nextTooltip:"Next",previousTooltip:"Previous",lastTooltip:"Last",firstTooltip:"First"},columnSelector:{header:"Show/Hide Column"},dropdownFilter:{noDataMessage:"No Results Available",filterPlaceholder:"Search",selectedOptionWrapPlaceholder:"Options",selectPlaceholder:"Select"}},this.sortable=!1,this.sortOrder="",this.filterable=!1,this.filterPlaceholder="Search",this.columnResizable=!1,this.columnVisible=!0,this.showDropdownFilter=!1,this.showFilterClearButton=!0,this.dropdownFilterMenuPosition="bottom-left",this.dropdownFilterSelectMode="multi",this.dropdownFilterSearchable=!0,this.dropdownFilterSearchDebounceTime=500,this.dropdownFilterSearchDebounce=!0,this.dropdownFilterWrapDisplaySelectLimit=1,this.dropdownFilterGroupByField=void 0,this.dropdownFilterShowSelectedOptionRemoveButton=!1,this.dropdownFilterShowClearSelectionButton=!0,this.dropdownFilterMenuWidth=320,this.dropdownFilterMenuHeight=250,this.dropdownFilterMultiSelectOptionMaxWidth=135,this.dropdownFilterCloseMenuOnSelect=!0,this.dropdownFilterDynamicDimensionCalculation=!0,this.dropdownFilterDynamicWidthRatio=1.25,this.dropdownFilterDynamicHeightRatio=1.25,e&&Object.assign(this,e)}return Object.defineProperty(e.prototype,"translations",{get:function(){return this.baseTranslations},set:function(e){var t,n;if(e)try{for(var i=l(Object.entries(e)),o=i.next();!o.done;o=i.next()){var r=p(o.value,2),a=r[0],c=r[1];this.baseTranslations[a]=s({},this.baseTranslations[a],c)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showRowSelectCheckboxColumn",{get:function(){return this.rowSelectable&&this.showRowSelectCheckbox},enumerable:!0,configurable:!0}),e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[u]}]}]},e}();var f=function(){function e(){this.allRowSelectChangeStream=new t.EventEmitter,this.dataFetchStream=new t.EventEmitter,this.headerClickStream=new t.EventEmitter,this.rowBindStream=new t.EventEmitter,this.rowClickStream=new t.EventEmitter,this.rowDoubleClickStream=new t.EventEmitter,this.rowSelectChangeStream=new t.EventEmitter,this.cellBindStream=new t.EventEmitter,this.cellClickStream=new t.EventEmitter,this.initStream=new t.EventEmitter,this.dataBoundStream=new t.EventEmitter,this.columnBind=new t.EventEmitter,this.fetchFilterOptionsStream=new o.ReplaySubject(1),this.staticDataSourceStream=new o.ReplaySubject(1)}return e.decorators=[{type:t.Injectable}],e}();var g=function(){function e(){this.allRowSelected=!1,this.selectedRows=[],this.dataRows=[],this.dataLoading=!0,this.substituteRows=[],this.heardReload=!1,this.currentSortPriority=0,this.onDynamicRowSpanExtract=function(){return 1}}return Object.defineProperty(e.prototype,"showNoDataOverlay",{get:function(){return!this.dataRows.length&&!this.dataLoading},enumerable:!0,configurable:!0}),e.prototype.getUniqueId=function(e,t){return this.id+"-dt-"+e+"-"+t},e.decorators=[{type:t.Injectable}],e}();var S=function(){function e(e,t,n){this.dataTableConfigService=e,this.eventStateService=t,this.dataStateService=n,this.currentSortOrder="",this.baseSortOrder="",this.showInColumnSelector=!0,this.sortable=e.sortable,this.currentSortOrder=e.sortOrder,this.filterable=e.filterable,this.filterPlaceholder=e.filterPlaceholder,this.resizable=e.columnResizable,this.visible=e.columnVisible,this.showDropdownFilter=e.showDropdownFilter,this.showFilterClearButton=e.showFilterClearButton,this.dropdownFilterMenuPosition=e.dropdownFilterMenuPosition,this.dropdownFilterSelectMode=e.dropdownFilterSelectMode,this.dropdownFilterSearchable=e.dropdownFilterSearchable,this.dropdownFilterSearchDebounceTime=e.dropdownFilterSearchDebounceTime,this.dropdownFilterSearchDebounce=e.dropdownFilterSearchDebounce,this.dropdownFilterWrapDisplaySelectLimit=e.dropdownFilterWrapDisplaySelectLimit,this.dropdownFilterGroupByField=e.dropdownFilterGroupByField,this.dropdownFilterShowSelectedOptionRemoveButton=e.dropdownFilterShowSelectedOptionRemoveButton,this.dropdownFilterShowClearSelectionButton=e.dropdownFilterShowClearSelectionButton,this.dropdownFilterMenuWidth=e.dropdownFilterMenuWidth,this.dropdownFilterMenuHeight=e.dropdownFilterMenuHeight,this.dropdownFilterMultiSelectOptionMaxWidth=e.dropdownFilterMultiSelectOptionMaxWidth,this.dropdownFilterCloseMenuOnSelect=e.dropdownFilterCloseMenuOnSelect,this.dropdownFilterDynamicDimensionCalculation=e.dropdownFilterDynamicDimensionCalculation,this.dropdownFilterDynamicWidthRatio=e.dropdownFilterDynamicWidthRatio,this.dropdownFilterDynamicHeightRatio=e.dropdownFilterDynamicHeightRatio}return Object.defineProperty(e.prototype,"sortOrder",{get:function(){return this.currentSortOrder},set:function(e){this.currentSortOrder=e,this.baseSortOrder=e},enumerable:!0,configurable:!0}),e.prototype.resetSortOrder=function(){this.currentSortOrder=this.baseSortOrder},e.prototype.getCellColor=function(e){if(void 0!==this.onCellColorRender)return this.onCellColorRender(e,this)},e.prototype.getNewSortOrder=function(){var e;switch(this.sortOrder){case"asc":e="desc";break;case"desc":e="";break;case"":e="asc"}return e},e.prototype.getSortIconClass=function(){return{"sort-asc":"asc"===this.sortOrder,"sort-dsc":"desc"===this.sortOrder,"sort-reset":!this.sortOrder}},e.prototype.ngOnDestroy=function(){this.filterValueExtractorSubscription&&this.filterValueExtractorSubscription.unsubscribe()},e.prototype.ngOnInit=function(){if(!this.cssClass&&this.field&&(/^[a-zA-Z0-9_]+$/.test(this.field)?this.cssClass="column-"+this.field:this.cssClass="column-"+this.field.replace(/[^a-zA-Z0-9_]/g,"")),this.eventStateService.columnBind.emit(this),this.dataTableConfigService.multiColumnSortable&&this.sortable){if(""===this.sortOrder){if(void 0!==this.sortPriority)throw Error("[sortPriority] should be ignored when multi column sorting is enabled with natural sort order.")}else if(void 0===this.sortPriority)throw Error("[sortPriority] is required when multi column sorting is enabled with an explicit sort order.");if(this.sortPriority<1)throw Error("[sortPriority] must be greater than 1.");this.dataStateService.currentSortPriority<this.sortPriority&&(this.dataStateService.currentSortPriority=this.sortPriority)}},e.decorators=[{type:t.Component,args:[{selector:"ng-data-table-column",template:""}]}],e.ctorParameters=function(){return[{type:h},{type:f},{type:g}]},e.propDecorators={cellTemplate:[{type:t.ContentChild,args:["ngDataTableCell",{static:!0}]}],headerTemplate:[{type:t.ContentChild,args:["ngDataTableHeader",{static:!0}]}],filterTemplate:[{type:t.ContentChild,args:["ngDataTableFilter",{static:!0}]}],dropdownFilterLoadingSpinnerTemplate:[{type:t.ContentChild,args:["ngFilterDropdownLoadingSpinner",{static:!0}]}],dropdownFilterOptionTemplate:[{type:t.ContentChild,args:["ngFilterDropdownOption",{static:!0}]}],dropdownFilterOptionGroupHeaderTemplate:[{type:t.ContentChild,args:["ngFilterDropdownOptionGroupHeader",{static:!0}]}],filterExpression:[{type:t.Input}],filterFieldMapper:[{type:t.Input}],onCellColorRender:[{type:t.Input}],title:[{type:t.Input}],sortable:[{type:t.Input}],sortPriority:[{type:t.Input}],sortOrder:[{type:t.Input}],filterable:[{type:t.Input}],resizable:[{type:t.Input}],field:[{type:t.Input}],filterField:[{type:t.Input}],sortField:[{type:t.Input}],cssClass:[{type:t.Input}],width:[{type:t.Input}],visible:[{type:t.Input}],showInColumnSelector:[{type:t.Input}],filterPlaceholder:[{type:t.Input}],filter:[{type:t.Input}],showFilterClearButton:[{type:t.Input}],resizeMinLimit:[{type:t.Input}],showDropdownFilter:[{type:t.Input}],dropdownFilterMenuPosition:[{type:t.Input}],dropdownFilterSelectMode:[{type:t.Input}],dropdownFilterSearchable:[{type:t.Input}],dropdownFilterSearchDebounceTime:[{type:t.Input}],dropdownFilterSearchDebounce:[{type:t.Input}],dropDownFilterShowOptionSelectCheckbox:[{type:t.Input}],dropdownFilterWrapDisplaySelectLimit:[{type:t.Input}],dropdownFilterGroupByField:[{type:t.Input}],dropdownFilterShowSelectedOptionRemoveButton:[{type:t.Input}],dropdownFilterShowClearSelectionButton:[{type:t.Input}],dropdownFilterMenuWidth:[{type:t.Input}],dropdownFilterMenuHeight:[{type:t.Input}],dropdownFilterMultiSelectOptionMaxWidth:[{type:t.Input}],dropdownFilterCloseMenuOnSelect:[{type:t.Input}],dropdownFilterDynamicDimensionCalculation:[{type:t.Input}],dropdownFilterDynamicWidthRatio:[{type:t.Input}],dropdownFilterDynamicHeightRatio:[{type:t.Input}]},e}();var m={HARD_RELOAD:0,SOFT_RELOAD:1,SOFT_LOAD:2};m[m.HARD_RELOAD]="HARD_RELOAD",m[m.SOFT_RELOAD]="SOFT_RELOAD",m[m.SOFT_LOAD]="SOFT_LOAD";var b=function(){function e(e,n){this.config=e,this.eventStateService=n,this.columnFilterStream=new o.Subject,this.customFilterStream=new t.EventEmitter}return e.prototype.ngOnInit=function(){this.initCustomFilterEvent(),this.initDebounceDefaultFilterEvent()},e.prototype.ngOnDestroy=function(){this.customFilterSubscription&&this.customFilterSubscription.unsubscribe(),this.columnFilterSubscription&&this.columnFilterSubscription.unsubscribe()},e.prototype.initCustomFilterEvent=function(){var e=this;this.customFilterSubscription=this.customFilterStream.subscribe(function(t){t.column.filter=t.filter,e.onFilter()})},e.prototype.initDebounceDefaultFilterEvent=function(){var e=this;this.columnFilterSubscription=this.columnFilterStream.pipe(r.debounceTime(this.config.filterDebounceTime)).subscribe(function(){e.eventStateService.dataFetchStream.next(m.SOFT_LOAD)})},e.prototype.onFilter=function(){this.config.filterDebounce?this.columnFilterStream.next():this.eventStateService.dataFetchStream.next(m.SOFT_LOAD)},e.decorators=[{type:t.Component,args:[{exportAs:"ngDataTableColumnFilterHeader",selector:"[ngDataTableColumnFilterHeader]",template:'<th *ngIf="config.expandableRows" class="ng-data-table-expand-column-header"></th>\n<th *ngIf="config.showIndexColumn" class="ng-data-table-index-column-header"></th>\n<th *ngIf="config.showRowSelectCheckboxColumn" class="ng-data-table-select-column-header"></th>\n<ng-container *ngFor="let column of columns; index as i;">\n  <th *ngIf="column.visible">\n    <ng-data-table-column-filter-template [column]="column"\n                                          [customFilterStream]="customFilterStream"\n                                          [index]="i"\n                                          (filter)="onFilter()">\n    </ng-data-table-column-filter-template>\n  </th>\n</ng-container>\n'}]}],e.ctorParameters=function(){return[{type:h},{type:f}]},e.propDecorators={columns:[{type:t.Input}]},e}();var y=function(){function e(){this.scrollPositionStream=new o.Subject}return e.decorators=[{type:t.Injectable}],e}();var v=function(){function e(e,n,i,r){this.config=e,this.dataStateService=n,this.eventStateService=i,this.scrollPositionService=r,this.filter=new t.EventEmitter,this.filterDataStream=new o.Subject}return e.prototype.ngOnInit=function(){var e=this;this.column.showDropdownFilter&&(this.scrollPositionStreamSubscription=this.scrollPositionService.scrollPositionStream.subscribe(function(t){t.isHorizontal&&e.filterDropdown.close()}),this.dataStateService.onFilterValueExtract&&(this.fetchFilterOptionsStreamSubscription=this.eventStateService.fetchFilterOptionsStream.pipe(r.switchMap(function(){return e.dataStateService.onFilterValueExtract(e.column)})).subscribe(function(t){setTimeout(function(){return e.filterDataStream.next(t)},0)})))},e.prototype.ngOnDestroy=function(){this.fetchFilterOptionsStreamSubscription&&this.fetchFilterOptionsStreamSubscription.unsubscribe(),this.scrollPositionStreamSubscription&&this.scrollPositionStreamSubscription.unsubscribe(),this.filterDataStream.complete()},e.prototype.onFilterDropdownInit=function(e){this.filterDropdown=e},e.prototype.clearFilter=function(){this.column.filter="",this.filter.emit()},e.decorators=[{type:t.Component,args:[{selector:"ng-data-table-column-filter-template",template:'<ng-container *ngIf="column.filterable">\n  <ng-container\n    *ngIf="column.filterTemplate"\n    [ngTemplateOutlet]="column.filterTemplate"\n    [ngTemplateOutletContext]="{ column: column, filter: customFilterStream }"\n  >\n  </ng-container>\n  <ng-container *ngIf="!column.filterTemplate">\n    <div class="ng-data-table-header-input-box" *ngIf="!column.showDropdownFilter">\n      <input\n        type="text"\n        class="ng-data-table-header-input"\n        [(ngModel)]="column.filter"\n        [class.ng-data-table-clear-filter]="column.showFilterClearButton"\n        (keyup)="filter.emit()"\n        [placeholder]="column.filterPlaceholder"\n      />\n      <span class="ng-data-table-input-group-btn">\n        <button\n          *ngIf="column.showFilterClearButton"\n          [hidden]="!column.filter"\n          class="ng-data-table-delete-button"\n          type="button"\n          (click)="clearFilter()"\n        ></button>\n      </span>\n    </div>\n    <ng-dropdown\n      *ngIf="column.showDropdownFilter"\n      [id]="dataStateService.getUniqueId(\'col\', index)"\n      [relativeParentElement]="dataStateService.relativeParentElement"\n      [dataSource]="filterDataStream"\n      [menuPosition]="column.dropdownFilterMenuPosition"\n      [filterable]="column.dropdownFilterSearchable"\n      [filterDebounceTime]="column.dropdownFilterSearchDebounceTime"\n      [filterDebounce]="column.dropdownFilterSearchDebounce"\n      [selectMode]="column.dropdownFilterSelectMode"\n      [showSelectedOptionRemoveButton]="column.dropdownFilterShowSelectedOptionRemoveButton"\n      [showClearSelectionButton]="column.dropdownFilterShowClearSelectionButton"\n      [wrapDisplaySelectLimit]="column.dropdownFilterWrapDisplaySelectLimit"\n      [groupByField]="column.dropdownFilterGroupByField"\n      [showOptionSelectCheckbox]="column.dropDownFilterShowOptionSelectCheckbox"\n      [menuHeight]="column.dropdownFilterMenuHeight"\n      [menuWidth]="column.dropdownFilterMenuWidth"\n      [multiSelectOptionMaxWidth]="column.dropdownFilterMultiSelectOptionMaxWidth"\n      [closeMenuOnSelect]="column.dropdownFilterCloseMenuOnSelect"\n      [dynamicDimensionCalculation]="column.dropdownFilterDynamicDimensionCalculation"\n      [dynamicWidthRatio]="column.dropdownFilterDynamicWidthRatio"\n      [dynamicHeightRatio]="column.dropdownFilterDynamicHeightRatio"\n      [loadingSpinnerTemplateRef]="column.dropdownFilterLoadingSpinnerTemplate"\n      [optionTemplateRef]="column.dropdownFilterOptionTemplate"\n      [optionGroupHeaderTemplateRef]="column.dropdownFilterOptionGroupHeaderTemplate"\n      [translations]="config.translations.dropdownFilter"\n      [(ngModel)]="column.filter"\n      (selectChange)="filter.emit()"\n      (init)="onFilterDropdownInit($event)"\n    >\n    </ng-dropdown>\n  </ng-container>\n</ng-container>\n'}]}],e.ctorParameters=function(){return[{type:h},{type:g},{type:f},{type:y}]},e.propDecorators={column:[{type:t.Input}],customFilterStream:[{type:t.Input}],index:[{type:t.Input}],filter:[{type:t.Output}]},e}();var w=/[,[\].]+?/;function O(e,t){return null==e?e:String.prototype.split.call(t,w).filter(Boolean).reduce(function(e,t){if(null!==e&&"object"==typeof e)return e[t]},e)}var C=function(){function e(){this.ngInit=new t.EventEmitter}return e.prototype.ngOnInit=function(){this.ngInit.emit()},e.decorators=[{type:t.Directive,args:[{selector:"[ngInit]"}]}],e.propDecorators={ngInit:[{type:t.Output}]},e}();var R=function(){function e(e){this.el=e}return e.prototype.ngOnInit=function(){this.el.nativeElement.focus()},e.decorators=[{type:t.Directive,args:[{selector:"[ngFocus]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef}]},e}();var I=function(){function e(){}return e.prototype.transform=function(e){if(void 0!==e)return"string"==typeof e?e:"number"==typeof e?e+"px":void 0},e.decorators=[{type:t.Pipe,args:[{name:"ngPx"}]}],e}(),x=function(){function e(){}return e.decorators=[{type:t.Injectable}],e}(),D=function(){function e(){}return e.prototype.drag=function(e,t){var n=t.move,i=t.up,o=e.pageX,r=e.pageY,a=o,c=r,s=!1,l=function(e){var t=e.pageX-a,i=e.pageY-c;a=e.pageX,c=e.pageY,(t||i)&&(s=!0),n(e,t,i,a,c),e.preventDefault()},p=function(e){a=e.pageX,c=e.pageY,document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",p),i&&i(e,a,c,s)};document.addEventListener("mousemove",l),document.addEventListener("mouseup",p)},e.decorators=[{type:t.Injectable}],e}(),P=function(){function e(){this.setScrollbarWidth()}return e.prototype.setScrollbarWidth=function(){if(void 0===this.scrollbarWidthValue&&this.isBrowser){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var i=n.offsetWidth;e.parentNode.removeChild(e),this.scrollbarWidthValue=t-i}},Object.defineProperty(e.prototype,"scrollbarWidth",{get:function(){return this.scrollbarWidthValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return window},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBrowser",{get:function(){return"undefined"!=typeof window},enumerable:!0,configurable:!0}),e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[]},e}();var F=function(){function e(e){this.globalRefService=e,this.globalRefService.isBrowser?this.resize=o.fromEvent(this.globalRefService.window,"resize"):this.resize=new o.Subject}return e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:P}]},e}();var T=function(){function e(e,t,n,i,o){this.componentFactoryResolver=e,this.appRef=t,this.globalRefService=n,this.renderer=i,this.resizeService=o,this.isVisible=!1}return e.prototype.registerClickOutside=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=function(n){t.some(function(e){return e.contains(n.target)})||e.hide()};this.clickListener=this.renderer.listen("document","click",i),this.touchStartListener=this.renderer.listen("document","touchstart",i)},e.prototype.setPosition=function(e,t){var n=this,i=(t.relativeParentElement||e).getBoundingClientRect(),o=e.getBoundingClientRect(),a=0,c=0;t.position.includes("right")&&(a=e.offsetWidth),t.position.includes("bottom")&&(c=e.offsetHeight);var s=this.componentReference.location.nativeElement;s.style.top=o.top-i.top+c+t.floatTop+"px",s.style.left=o.left-i.left+a+t.floatLeft+"px",s.style.position="absolute",s.style.display="block";var l=s.firstElementChild;l&&(t.position.includes("right")&&(l.style.right="0px"),t.position.includes("top")&&(l.style.bottom="0px"),l.style.position="absolute"),this.resizeEventSubscription=this.resizeService.resize.pipe(r.take(1)).subscribe(function(){n.hide()})},e.prototype.show=function(e,t,n,i){if(i=Object.assign({closeOnOutsideClick:!0,floatLeft:0,floatTop:0,position:"bottom-left"},i),this.componentReference)return this.setPosition(t,i),void(this.isVisible=!0);this.componentReference=this.componentFactoryResolver.resolveComponentFactory(e).create(n),i.context&&Object.assign(this.componentReference.instance,i.context),this.appRef.attachView(this.componentReference.hostView);var o=this.componentReference.hostView.rootNodes[0];return this.setPosition(t,i),(i.relativeParentElement||t).appendChild(o),this.componentReference.changeDetectorRef.markForCheck(),this.componentReference.changeDetectorRef.detectChanges(),this.isVisible=!0,i.closeOnOutsideClick&&this.registerClickOutside(t,this.componentReference.location.nativeElement),this.componentReference.instance},e.prototype.hide=function(){if(this.componentReference)return this.componentReference.location.nativeElement.style.display="none",this.isVisible=!1,this.componentReference.instance},e.prototype.toggle=function(e,t,n,i){return this.isVisible?this.hide():this.show(e,t,n,i)},e.prototype.dispose=function(){this.resizeEventSubscription&&this.resizeEventSubscription.unsubscribe(),this.componentReference&&(this.appRef.detachView(this.componentReference.hostView),this.componentReference.destroy()),this.clickListener&&(this.clickListener(),this.clickListener=null),this.touchStartListener&&(this.touchStartListener(),this.touchStartListener=null),this.componentReference=null},e}();var k=function(){function e(e,t,n,i){this.componentFactoryResolver=e,this.appRef=t,this.globalRefService=n,this.resizeService=i}return e.prototype.createLoader=function(e){return new T(this.componentFactoryResolver,this.appRef,this.globalRefService,e,this.resizeService)},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:t.ComponentFactoryResolver},{type:t.ApplicationRef},{type:P},{type:F}]},e}();var E=function(){function e(){}return e.idPatternValidatorExpression=new RegExp("^[A-Za-z]+[\\w\\-]*$"),e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}();var j=[C,R],M=[I],B=[D,P,k,F,E],L=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[x]}},e.decorators=[{type:t.NgModule,args:[{imports:[n.CommonModule],declarations:d(j,M),providers:d(B),exports:d(j,M)}]}],e}(),W=function(){function e(e,t,n,i){this.dragAndDropService=e,this.eventStateService=t,this.dataStateService=n,this.config=i,this.resizeInProgress=!1}return e.prototype.onHeaderClick=function(e,t){this.resizeInProgress?this.resizeInProgress=!1:(this.sortData(e),this.eventStateService.headerClickStream.emit({column:e,event:t}))},e.prototype.sortData=function(e){if(e.sortable){var t=e.sortOrder;if(e.sortOrder)e.sortOrder=e.getNewSortOrder();else{if(!this.config.multiColumnSortable)this.columns.filter(function(e){return e.sortable}).forEach(function(t){t!==e&&(t.sortOrder="")});e.sortOrder="asc"}if(this.config.multiColumnSortable)if(""===e.sortOrder)this.columns.filter(function(e){return e.sortable}).forEach(function(t){t!==e&&t.sortPriority>e.sortPriority&&--t.sortPriority}),e.sortPriority=void 0,--this.dataStateService.currentSortPriority;else t||(e.sortPriority=++this.dataStateService.currentSortPriority);this.eventStateService.dataFetchStream.next(m.SOFT_LOAD)}},e.prototype.setColumnWidth=function(e,t){t.actualWidth=e},e.prototype.onColumnResize=function(e,t,n){var i=this;this.resizeInProgress=!0,this.dragAndDropService.drag(e,{move:function(e,o){var r=n.offsetWidth+o;if(!(void 0!==t.resizeMinLimit&&r<t.resizeMinLimit)){t.actualWidth=r;var a=0;i.columns.forEach(function(e){e.width=e.actualWidth,a+=e.width}),i.dataStateService.tableWidth=a}}})},Object.defineProperty(e.prototype,"allRowSelected",{get:function(){return this.dataStateService.allRowSelected},set:function(e){this.dataStateService.allRowSelected=e,this.allRowSelectedChanged(this.dataStateService.allRowSelected),this.eventStateService.allRowSelectChangeStream.emit(this.dataStateService.allRowSelected)},enumerable:!0,configurable:!0}),e.prototype.allRowSelectedChanged=function(e){var t=this;this.dataStateService.dataRows.forEach(function(n){var i=O(n.item,t.config.selectTrackBy),o=t.dataStateService.selectedRows.indexOf(i);e&&o<0?t.dataStateService.selectedRows.push(i):!e&&o>-1&&t.dataStateService.selectedRows.splice(o,1),n.selected=e}),this.eventStateService.rowSelectChangeStream.emit(this.dataStateService.selectedRows)},Object.defineProperty(e.prototype,"showAllRowSelectCheckbox",{get:function(){return"multi"===this.config.selectMode&&this.config.showRowSelectAllCheckbox},enumerable:!0,configurable:!0}),e.prototype.showSortPriorityLabel=function(e){return!!(this.config.multiColumnSortable&&this.dataStateService.currentSortPriority>1&&e.sortPriority)},e.decorators=[{type:t.Component,args:[{exportAs:"ngDataTableColumnTitleHeader",selector:"[ngDataTableColumnTitleHeader]",template:'<th class="ng-data-table-expand-column-header" *ngIf="config.expandableRows"></th>\n<th class="ng-data-table-index-column-header" *ngIf="config.showIndexColumn">\n  <span [textContent]="config.indexColumnTitle"></span>\n</th>\n<th class="ng-data-table-select-column-header" *ngIf="config.showRowSelectCheckboxColumn">\n  <div class="ng-data-table-checkbox-container" *ngIf="showAllRowSelectCheckbox">\n    <input class="ng-data-table-checkbox-input" type="checkbox"\n           [id]="dataStateService.getUniqueId(\'rsa\', 0)" [(ngModel)]="allRowSelected"/>\n    <label [for]="dataStateService.getUniqueId(\'rsa\', 0)"></label>\n  </div>\n</th>\n<ng-container *ngFor="let column of columns">\n  <th class="ng-data-table-column-header"\n    #columnHeader\n    *ngIf="column.visible"\n    (click)="onHeaderClick(column, $event)"\n    (ngElementWidth)="setColumnWidth($event, column)"\n    [class.sortable]="column.sortable"\n    [class.resizable]="column.resizable"\n    [ngClass]="column.cssClass">\n    <span class="ng-data-table-column-sort-priority" *ngIf="showSortPriorityLabel(column)"><small>{{column.sortPriority}}</small></span>\n    <span *ngIf="!column.headerTemplate" [textContent]="column.title" class="ng-data-table-column-header-label"></span>\n    <ng-container *ngIf="column.headerTemplate" [ngTemplateOutlet]="column.headerTemplate" [ngTemplateOutletContext]="{ column: column }">\n    </ng-container>\n    <span class="ng-data-table-column-sort-icon" [hidden]="!column.sortable" [ngClass]="column.getSortIconClass()"></span>\n    <span class="ng-data-table-column-resize-handle" *ngIf="column.resizable" (mousedown)="onColumnResize($event, column, columnHeader)"> </span>\n  </th>\n</ng-container>\n'}]}],e.ctorParameters=function(){return[{type:D},{type:f},{type:g},{type:h}]},e.propDecorators={columns:[{type:t.Input}]},e}();var H=function(){function e(e,t){this.dataStateService=e,this.config=t}return e.decorators=[{type:t.Component,args:[{selector:"ng-data-table-column-selector",template:'<div class="ng-data-table-column-selector-wrapper" [style.width]="width | ngPx">\n  <div class="ng-data-table-column-selector-box-heading">{{ config.translations.columnSelector.header }}</div>\n  <div class="ng-data-table-column-selector-box">\n    <ng-container *ngFor="let column of columns; index as i;">\n      <div class="ng-data-table-column-selector-column ng-data-table-column-selector-checkbox" *ngIf="column.showInColumnSelector">\n        <div class="ng-data-table-checkbox-container">\n          <input class="ng-data-table-checkbox-input" type="checkbox"\n                 [id]="dataStateService.getUniqueId(\'cs\', i)" [(ngModel)]="column.visible"/>\n          <label [for]="dataStateService.getUniqueId(\'cs\', i)"><span [textContent]="column.title"></span></label>\n        </div>\n      </div>\n    </ng-container>\n  </div>\n</div>\n'}]}],e.ctorParameters=function(){return[{type:g},{type:h}]},e.propDecorators={columns:[{type:t.Input}],width:[{type:t.Input}]},e}();var A=function(){function e(e,t,n,i,o,r){this.componentLoaderFactory=e,this.injector=t,this.eventStateService=n,this.renderer=i,this.dataStateService=o,this.config=r,this.componentLoader=this.componentLoaderFactory.createLoader(this.renderer)}return e.prototype.toggleColumnSelector=function(e){this.componentLoader.toggle(H,e,this.injector,{context:{columns:this.columns,width:this.config.columnSelectorWidth},position:"bottom-right"})},e.prototype.onReload=function(){this.eventStateService.dataFetchStream.next(m.HARD_RELOAD)},e.prototype.ngOnDestroy=function(){this.componentLoader.dispose()},e.decorators=[{type:t.Component,args:[{selector:"ng-data-table-header",template:'<div class="ng-data-table-top-header-container" #header>\n  <h4 class="ng-data-table-top-header-title" [textContent]="config.title"></h4>\n  <div class="ng-data-table-top-header-button-container">\n    <button\n      title="Refresh"\n      type="button"\n      class="ng-data-table-action-button ng-data-table-refresh-button"\n      (click)="onReload()"\n      *ngIf="config.showRefreshButton"\n      [disabled]="dataStateService.dataLoading"></button>\n    <button\n      title="Select Column"\n      type="button"\n      class="ng-data-table-action-button ng-data-table-column-selector-button"\n      (click)="toggleColumnSelector(header)"\n      *ngIf="config.showColumnSelector"></button>\n  </div>\n</div>\n'}]}],e.ctorParameters=function(){return[{type:k},{type:t.Injector},{type:f},{type:t.Renderer2},{type:g},{type:h}]},e.propDecorators={columns:[{type:t.Input}]},e}();var V=function(){function e(e){this.config=e}return e.decorators=[{type:t.Component,args:[{exportAs:"ngDataTableColGroup",selector:"[ngDataTableColGroup]",template:'<col *ngIf="config.expandableRows" [style.width]="config.expanderColumnWidth | ngPx" />\n<col *ngIf="config.showIndexColumn" [style.width]="config.indexColumnWidth | ngPx" />\n<col *ngIf="config.showRowSelectCheckboxColumn" [style.width]="config.selectionColumnWidth | ngPx" />\n<ng-container *ngFor="let column of columns">\n  <col [style.width]="column.width | ngPx" *ngIf="column.visible" />\n</ng-container>\n'}]}],e.ctorParameters=function(){return[{type:h}]},e.propDecorators={columns:[{type:t.Input}]},e}();var q=function(){function e(e,t,n,i){this.config=e,this.dataStateService=t,this.eventStateService=n,this.resizeService=i,this.isMobile=!1}return e.prototype.setMobileModeState=function(){this.isMobile=this.paginationContainer.nativeElement.clientWidth<767},e.prototype.firstPageClick=function(){this.config.offset=0,this.eventStateService.dataFetchStream.emit(m.SOFT_LOAD)},e.prototype.previousPageClick=function(){this.config.offset=this.config.offset-Math.min(this.config.limit,this.config.offset),this.eventStateService.dataFetchStream.emit(m.SOFT_LOAD)},e.prototype.nextPageClick=function(){this.config.offset=this.config.offset+this.config.limit,this.eventStateService.dataFetchStream.emit(m.SOFT_LOAD)},e.prototype.lastPageClick=function(){this.config.offset=(this.maxPage-1)*this.config.limit,this.eventStateService.dataFetchStream.emit(m.SOFT_LOAD)},Object.defineProperty(e.prototype,"maxPage",{get:function(){return Math.ceil(this.dataStateService.itemCount/this.config.limit)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"page",{get:function(){return Math.floor(this.config.offset/this.config.limit)+1},enumerable:!0,configurable:!0}),e.prototype.isInvalidLimit=function(e){var t=Number(e.value);return""===e.value||t>this.config.maxLimit||t<1},e.prototype.onPageSizeChange=function(e){if(this.isInvalidLimit(e))e.value=String(this.config.limit);else{var t=Number(e.value);this.config.limit!==t&&(this.config.offset=0,this.config.limit=t,this.eventStateService.dataFetchStream.emit(m.SOFT_LOAD))}},e.prototype.onPageSizeRevert=function(e){e.value=String(this.config.limit)},e.prototype.isInvalidPageIndex=function(e){var t=Number(e.value);return""===e.value||t>this.maxPage||t<1},e.prototype.onPageIndexChange=function(e){if(this.isInvalidPageIndex(e))e.value=String(this.page);else{var t=Number(e.value);this.page!==t&&(this.config.offset=(t-1)*this.config.limit,this.eventStateService.dataFetchStream.emit(m.SOFT_LOAD))}},e.prototype.onPageIndexRevert=function(e){e.value=String(this.page)},Object.defineProperty(e.prototype,"hasPrevious",{get:function(){return this.config.offset<=0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return this.config.offset+this.config.limit>=this.dataStateService.itemCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startRowIndex",{get:function(){return this.config.offset+1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endRowIndex",{get:function(){return Math.min(this.config.offset+this.config.limit,this.dataStateService.itemCount)},enumerable:!0,configurable:!0}),e.prototype.preventInvalidKeyPress=function(e){e.key>="0"&&e.key<="9"||"ArrowLeft"===e.key||"ArrowRight"===e.key||"Delete"===e.key||"Backspace"===e.key||"Escape"===e.key||"Enter"===e.key||e.preventDefault()},e.prototype.ngOnInit=function(){var e=this;this.setMobileModeState(),this.resizeService.resize.pipe(r.debounceTime(200)).subscribe(function(){e.setMobileModeState()})},e.decorators=[{type:t.Component,args:[{selector:"ng-data-table-pagination",template:'<div class="ng-data-table-pagination-container" #paginationContainer>\n  <div class="ng-data-table-pagination-range" [hidden]="isMobile">\n    {{ config.translations.pagination.rangeKey }} <span [textContent]="startRowIndex"></span>\n    -<span [textContent]="endRowIndex"></span>\n    {{ config.translations.pagination.rangeSeparator }}\n    <span [textContent]="dataStateService.itemCount"></span>\n  </div>\n  <div class="ng-data-table-pagination-controllers" [class.sm-controllers]="isMobile">\n    <div class="ng-data-table-pagination-limit">\n      <div class="ng-data-table-pagination-input-container">\n        <label class="ng-data-table-pagination-input-label">{{ config.translations.pagination.limit }}</label>\n        <input\n          #limitInput\n          type="number"\n          class="ng-data-table-pagination-input"\n          min="1"\n          step="1"\n          [attr.max]="config.maxLimit"\n          [class.ng-data-table-input-error]="isInvalidLimit(limitInput)"\n          [ngModel]="config.limit"\n          required\n          (keypress)="preventInvalidKeyPress($event)"\n          (keyup.enter)="onPageSizeChange(limitInput)"\n          (keyup.esc)="onPageSizeRevert(limitInput)"\n        />\n      </div>\n    </div>\n    <div class="ng-data-table-pagination-pages">\n      <button\n        [disabled]="hasPrevious"\n        (click)="firstPageClick()"\n        [title]="config.translations.pagination.firstTooltip"\n        class="ng-data-table-action-button ng-data-table-pagination-firstpage"\n      ></button>\n      <button\n        [disabled]="hasPrevious"\n        (click)="previousPageClick()"\n        [title]="config.translations.pagination.previousTooltip"\n        class="ng-data-table-action-button ng-data-table-pagination-prevpage"\n      ></button>\n      <div class="ng-data-table-pagination-page">\n        <div class="ng-data-table-pagination-input-container">\n          <input\n            #pageInput\n            type="number"\n            class="ng-data-table-pagination-input"\n            min="1"\n            step="1"\n            [attr.max]="maxPage"\n            [class.ng-data-table-input-error]="isInvalidPageIndex(pageInput)"\n            [ngModel]="page"\n            required\n            (keypress)="preventInvalidKeyPress($event)"\n            (keyup.enter)="onPageIndexChange(pageInput)"\n            (keyup.esc)="onPageIndexRevert(pageInput)"\n          />\n          <div class="ng-data-table-pagination-input-label">\n            <span>/ </span>\n            <span [textContent]="maxPage"></span>\n          </div>\n        </div>\n      </div>\n      <button\n        [disabled]="hasNext"\n        (click)="nextPageClick()"\n        [title]="config.translations.pagination.nextTooltip"\n        class="ng-data-table-action-button ng-data-table-pagination-nextpage"\n      ></button>\n      <button\n        [disabled]="hasNext"\n        (click)="lastPageClick()"\n        [title]="config.translations.pagination.lastTooltip"\n        class="ng-data-table-action-button ng-data-table-pagination-lastpage"\n      ></button>\n    </div>\n  </div>\n</div>\n'}]}],e.ctorParameters=function(){return[{type:h},{type:g},{type:f},{type:F}]},e.propDecorators={paginationContainer:[{type:t.ViewChild,args:["paginationContainer",{static:!0}]}]},e}();var z=function(){function e(e,t){this.globalRefService=e,this.config=t}return Object.defineProperty(e.prototype,"storageMode",{set:function(e){this.globalRefService.isBrowser&&(this.storage="local"===e?this.globalRefService.window.localStorage:this.globalRefService.window.sessionStorage)},enumerable:!0,configurable:!0}),e.prototype.setState=function(e,t,n){if(void 0===n&&(n="v1"),this.globalRefService.isBrowser){var i={ver:n,val:t};this.storage.setItem(""+this.config.stateKeyPrefix+e,JSON.stringify(i))}},e.prototype.getState=function(e,t){if(void 0===t&&(t="v1"),this.globalRefService.isBrowser){var n=JSON.parse(this.storage.getItem(""+this.config.stateKeyPrefix+e));if(n&&n.ver===t)return n.val}return null},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:P},{type:h}]},e}();var _=function(){function e(){}return e.prototype.setDataSource=function(e){var t=this;this.dispose(),this.itemDataStream&&!this.itemDataStream.closed&&this.itemDataStream.complete(),this.itemDataStream=new o.ReplaySubject(1),this.dataSourceSubscription=e.subscribe(function(e){t.itemDataStream.next(e)})},e.prototype.query=function(e){return this.itemDataStream.pipe(r.switchMap(function(t){var n,i,r,a=t.length,c=t.slice();if(e.fields.length){var s=e.fields.filter(function(e){return e.filterable});s.length&&(a=(c=t.filter(function(e){return s.every(function(t){if(t.filterExpression)return t.filterExpression(e,t.field,t.filterValue);if(void 0===t.filterValue||""===t.filterValue)return!0;var n=O(e,t.field);if(void 0===n)return!0;if(Array.isArray(t.filterValue))return 0===t.filterValue.length||t.filterValue.includes(n);var i=String(n).toLowerCase(),o=String(t.filterValue).toLowerCase();return i.includes(o)})})).length);var l=e.fields.filter(function(e){return e.sortable&&""!==e.sortOrder});if(l.length){var p=l;l.length>1&&(p=l.concat().sort(function(e,t){return e.sortPriority-t.sortPriority}));var d=p.reduce(function(e,t){return e&&(e.fields.push(t.field),e.orders.push(t.sortOrder)),e},{fields:[],orders:[]});n=c,i=d.fields,r=d.orders,console.log(i),c=n.concat().sort(function(e,t){for(var n=0;n<i.length;n++){var o=i[n],a=r[n];if(e[o]>t[o])return"asc"===a?1:-1;if(e[o]<t[o])return"asc"===a?-1:1}return 0})}}if(void 0!==e.offset){var u=e.offset+1>c.length?0:e.offset;c=void 0===e.limit?c.slice(u,c.length):c.slice(u,u+e.limit)}return o.of({items:c,count:a})}))},e.prototype.extractFilterOptions=function(e){return this.itemDataStream.pipe(r.switchMap(function(t){var n=t.reduce(function(t,n,i){if(e.filterFieldMapper)return t.concat(e.filterFieldMapper(n,i));var o=O(n,e.filterField||e.field);return t.push({key:o,value:o}),t},[]).filter(function(e,t,n){return n.findIndex(function(t){return t.key===e.key})===t});return o.of(n)}))},e.prototype.dispose=function(){this.dataSourceSubscription&&(this.dataSourceSubscription.unsubscribe(),this.dataSourceSubscription=null),this.itemDataStream&&!this.itemDataStream.closed&&this.itemDataStream.complete()},e.decorators=[{type:t.Injectable}],e}();var N=function(){function e(e,t,n,i,o,r,a,c,s){this.dragAndDropService=e,this.dataTableStateService=t,this.globalRefService=n,this.eventStateService=i,this.dataTableResourceService=o,this.zone=r,this.dataStateService=a,this.scrollPositionService=c,this.config=s,this.storageMode=s.storageMode,this.headerClick=this.eventStateService.headerClickStream,this.allRowSelectChange=this.eventStateService.allRowSelectChangeStream,this.rowBind=this.eventStateService.rowBindStream,this.rowClick=this.eventStateService.rowClickStream,this.rowDoubleClick=this.eventStateService.rowDoubleClickStream,this.rowSelectChange=this.eventStateService.rowSelectChangeStream,this.cellBind=this.eventStateService.cellBindStream,this.cellClick=this.eventStateService.cellClickStream,this.init=this.eventStateService.initStream,this.dataBound=this.eventStateService.dataBoundStream,this.columnBind=this.eventStateService.columnBind}return Object.defineProperty(e.prototype,"onDataBind",{set:function(e){this.dataStateService.onDataBind=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onFilterValueExtract",{set:function(e){this.dataStateService.onFilterValueExtract=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onDynamicRowSpanExtract",{set:function(e){this.dataStateService.onDynamicRowSpanExtract=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{set:function(e){e&&this.eventStateService.staticDataSourceStream.next(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataSource",{set:function(e){this.initDataSource(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{set:function(e){if(!E.idPatternValidatorExpression.test(e))throw Error('Invalid [id] input value. Unique identifier parameter only accept string begin with a letter ([A-Za-z]) and may be followed by any number of letters, digits ([0-9]), hyphens ("-"), underscores ("_").');this.dataStateService.id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"persistTableState",{set:function(e){this.config.persistTableState=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"storageMode",{set:function(e){this.dataTableStateService.storageMode=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multiColumnSortable",{set:function(e){this.config.multiColumnSortable=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showHeader",{set:function(e){this.config.showHeader=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{set:function(e){this.config.title=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{set:function(e){this.config.width=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minContentHeight",{set:function(e){this.config.minContentHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minContentWidth",{set:function(e){this.config.minContentWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentHeight",{set:function(e){this.config.contentHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageable",{set:function(e){this.config.pageable=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loadOnScroll",{set:function(e){this.config.loadOnScroll=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loadViewDistanceRatio",{set:function(e){this.config.loadViewDistanceRatio=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showIndexColumn",{set:function(e){this.config.showIndexColumn=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indexColumnTitle",{set:function(e){this.config.indexColumnTitle=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowSelectable",{set:function(e){this.config.rowSelectable=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectMode",{set:function(e){this.config.selectMode=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showRowSelectCheckbox",{set:function(e){this.config.showRowSelectCheckbox=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showRowSelectAllCheckbox",{set:function(e){this.config.showRowSelectAllCheckbox=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSubstituteRows",{set:function(e){this.config.showSubstituteRows=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expandableRows",{set:function(e){this.config.expandableRows=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectOnRowClick",{set:function(e){this.config.selectOnRowClick=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expandOnRowClick",{set:function(e){this.config.expandOnRowClick=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoFetch",{set:function(e){this.config.autoFetch=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showLoadingSpinner",{set:function(e){this.config.showLoadingSpinner=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectTrackBy",{set:function(e){this.config.selectTrackBy=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedRow",{set:function(e){this.dataStateService.selectedRow=e,this.eventStateService.rowSelectChangeStream.emit(this.dataStateService.selectedRow)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedRows",{set:function(e){this.dataStateService.selectedRows=e||[],this.eventStateService.rowSelectChangeStream.emit(this.dataStateService.selectedRows)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterDebounceTime",{set:function(e){this.config.filterDebounceTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterDebounce",{set:function(e){this.config.filterDebounce=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showRefreshButton",{set:function(e){this.config.showRefreshButton=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showColumnSelector",{set:function(e){this.config.showColumnSelector=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnSelectorWidth",{set:function(e){this.config.columnSelectorWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expanderColumnWidth",{set:function(e){this.config.expanderColumnWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indexColumnWidth",{set:function(e){this.config.indexColumnWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionColumnWidth",{set:function(e){this.config.selectionColumnWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"translations",{set:function(e){this.config.translations=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showRowExpandLoadingSpinner",{set:function(e){this.config.showRowExpandLoadingSpinner=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{set:function(e){this.config.offset=e,this.eventStateService.dataFetchStream.next(m.SOFT_LOAD)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"limit",{set:function(e){this.config.limit=e,this.eventStateService.dataFetchStream.next(m.SOFT_LOAD)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"page",{get:function(){return Math.floor(this.config.offset/this.config.limit)+1},set:function(e){this.offset=(e-1)*this.config.limit},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerPadding",{get:function(){return this.config.contentHeight?this.globalRefService.scrollbarWidth:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return!(this.config.loadOnScroll&&this.dataStateService.dataRows.length)&&this.config.showLoadingSpinner&&this.dataStateService.dataLoading},enumerable:!0,configurable:!0}),e.prototype.onAfterDataBind=function(e){this.dataStateService.itemCount=e.count,this.setDataRows(e.items),this.dataStateService.heardReload&&(this.eventStateService.fetchFilterOptionsStream.next(!1),this.dataStateService.heardReload=!1),this.dataStateService.dataLoading=!1,this.eventStateService.dataBoundStream.emit()},e.prototype.getSelectedState=function(e){var t=O(e,this.config.selectTrackBy);return void 0!==t&&("multi"===this.config.selectMode?this.dataStateService.selectedRows.indexOf(t)>-1:this.dataStateService.selectedRow===t)},e.prototype.setDataRows=function(e){var t=this,n=e.map(function(e,n){return{dataLoaded:!1,expanded:!1,disabled:!1,color:"",cssClass:"",tooltip:"",index:t.config.loadOnScroll||t.config.pageable?t.config.offset+n+1:n+1,item:e,selected:t.getSelectedState(e)}});if(this.config.loadOnScroll?this.dataStateService.dataRows=d(this.dataStateService.dataRows,n):this.dataStateService.dataRows=n,"multi"===this.config.selectMode&&(this.dataStateService.allRowSelected=0!==this.dataStateService.dataRows.length&&this.dataStateService.dataRows.every(function(e){return e.selected})),!this.config.loadOnScroll){var i=this.config.limit-this.dataStateService.dataRows.length;this.dataStateService.substituteRows=Array.from({length:i})}},e.prototype.initDataFetchEvent=function(){var e=this,t={items:[],count:0};this.dataFetchStreamSubscription=this.eventStateService.dataFetchStream.pipe(r.debounceTime(20),r.switchMap(function(t){return e.mapDataBind(t)}),r.catchError(function(){return o.of(t)})).subscribe(function(t){e.onAfterDataBind(t)},function(){e.onAfterDataBind(t)})},e.prototype.mapDataBind=function(e){this.dataStateService.dataLoading=!0,e===m.HARD_RELOAD&&(this.clearRowSelectState(),this.clearColumnState(),this.dataStateService.heardReload=!0,this.config.offset=0);var t={loadData:e===m.HARD_RELOAD||e===m.SOFT_RELOAD};return this.columns&&(t.fields=this.columns.filter(function(e){return e.sortable||e.filterable}).reduce(function(e,t){return t.sortField||t.filterField?e.push({field:t.sortField||t.filterField,column:t}):e.push({field:t.field,column:t}),e},[]).map(function(e){var t;return t=e.column.showDropdownFilter?"multi"===e.column.dropdownFilterSelectMode?e.column.filter&&e.column.filter.map(function(e){return e.key}):e.column.filter&&e.column.filter.key:e.column.filter,{field:e.field,sortable:e.column.sortable,sortOrder:e.column.sortOrder,sortPriority:e.column.sortPriority||(e.column.sortOrder?1:0),filterable:e.column.filterable,filterValue:t,filterExpression:e.column.filterExpression}})),(this.config.pageable||this.config.loadOnScroll)&&(t.offset=this.config.offset,t.limit=this.config.limit),this.config.persistTableState&&this.dataTableStateService.setState(this.dataStateService.id,t),this.dataStateService.onDataBind(t)},e.prototype.initDataTableState=function(){if(this.config.persistTableState){var e=this.dataTableStateService.getState(this.dataStateService.id);e&&(this.columns.forEach(function(t){var n=e.fields.find(function(e){return e.field===t.field});n&&(t.filterable&&n.filterable&&(t.showDropdownFilter?n.filterValue&&("multi"===t.dropdownFilterSelectMode?t.filter=n.filterValue.map(function(e){return{key:e,value:e}}):t.filter={key:n.filterValue,value:n.filterValue}):t.filter=n.filterValue),t.sortable&&n.sortable&&(t.sortOrder=n.sortOrder))}),this.config.limit=e.limit,this.config.offset=e.offset)}},e.prototype.ngAfterContentInit=function(){var e=this;this.dataStateService.relativeParentElement=this.dataTableElement.nativeElement,this.dataStateService.onDataBind||(this.dataSource=this.eventStateService.staticDataSourceStream),this.initDataTableState(),this.initDataFetchEvent(),this.config.autoFetch&&this.eventStateService.dataFetchStream.next(m.SOFT_LOAD),this.eventStateService.fetchFilterOptionsStream.next(!0),this.eventStateService.initStream.emit(this),this.config.loadOnScroll&&(this.scrollPositionSubscription=this.scrollPositionService.scrollPositionStream.subscribe(function(t){t.isVertical&&t.scrollTop>=t.scrollHeight-(1+e.config.loadViewDistanceRatio)*t.clientHeight-1-1&&e.config.offset+e.config.limit<e.dataStateService.itemCount&&!e.dataStateService.dataLoading&&(e.dataStateService.dataLoading=!0,e.zone.run(function(){e.offset=e.config.offset+e.config.limit}))}))},e.prototype.clearColumnState=function(){this.columns.forEach(function(e){e.resetSortOrder(),e.filter=void 0})},e.prototype.clearRowSelectState=function(){this.dataStateService.selectedRow=void 0,this.dataStateService.selectedRows=[],this.dataStateService.allRowSelected=!1},e.prototype.fetchData=function(e){void 0===e&&(e=m.SOFT_RELOAD),this.eventStateService.dataFetchStream.next(e)},e.prototype.initDataSource=function(e){var t=this;this.dataTableResourceService.setDataSource(e),this.onDataBind=function(n){return n.loadData&&t.dataTableResourceService.setDataSource(e),t.dataTableResourceService.query(n)},this.onFilterValueExtract=function(e){return t.dataTableResourceService.extractFilterOptions(e)}},e.prototype.writeValue=function(e){"multi"===this.config.selectMode?this.selectedRows=e:this.selectedRow=e},e.prototype.registerOnChange=function(e){this.rowSelectChangeSubscription=this.eventStateService.rowSelectChangeStream.subscribe(function(t){e(t)})},e.prototype.registerOnTouched=function(e){},Object.defineProperty(e.prototype,"tableWidth",{get:function(){return this.config.width||this.dataStateService.tableWidth},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){if(!this.dataStateService.id)throw Error("Missing required parameter value for [id] input.");if(this.config.loadOnScroll){if(!this.config.minContentHeight)throw Error("[minContentHeight] is required when [infiniteScrollable] is enabled.");if(this.config.pageable)throw Error("[pageable] and [infiniteScrollable] cannot be enabled at the same time.")}},e.prototype.ngOnDestroy=function(){this.dataFetchStreamSubscription&&this.dataFetchStreamSubscription.unsubscribe(),this.rowSelectChangeSubscription&&this.rowSelectChangeSubscription.unsubscribe(),this.scrollPositionSubscription&&this.scrollPositionSubscription.unsubscribe(),this.dataTableResourceService.dispose()},e.decorators=[{type:t.Component,args:[{selector:"ng-data-table",template:'<div class="ng-data-table-container" #dataTableElement [class.scrollable]="config.contentHeight">\n  <ng-data-table-header *ngIf="config.showHeader" [columns]="columns"> </ng-data-table-header>\n  <div class="ng-data-table-content-container" [ngScrollPosition]="scrollPositionService.scrollPositionStream">\n    <div class="ng-data-table-content-header-container" [style.paddingRight]="headerPadding | ngPx">\n      <div class="ng-data-table-content-header" [ngScrollElement]="scrollPositionService.scrollPositionStream">\n        <table class="ng-data-table" [style.width]="tableWidth | ngPx" [style.minWidth]="config.minContentWidth | ngPx">\n          <colgroup ngDataTableColGroup [columns]="columns"></colgroup>\n          <thead ngDataTableHead [columns]="columns"></thead>\n        </table>\n      </div>\n    </div>\n    <div class="ng-data-table-content" [ngScrollPosition]="scrollPositionService.scrollPositionStream"\n         [style.height]="config.contentHeight | ngPx" [style.minHeight]="config.minContentHeight | ngPx">\n      <ng-data-table-loading-spinner [loadingSpinnerTemplate]="loadingSpinnerTemplate" [isLoading]="isLoading" [showOverlay]="true">\n      </ng-data-table-loading-spinner>\n      <table class="ng-data-table" [style.width]="tableWidth | ngPx" [style.minWidth]="config.minContentWidth | ngPx" [hidden]="isLoading">\n        <colgroup ngDataTableColGroup [columns]="columns"></colgroup>\n        <tbody\n          ngDataTableBody\n          [columns]="columns"\n          [rowExpandTemplate]="rowExpandTemplate"\n          [rowExpandLoadingSpinnerTemplate]="rowExpandLoadingSpinnerTemplate"\n        ></tbody>\n      </table>\n      <ng-data-table-no-data-body\n        class="ng-data-table-no-records-message-container"\n        *ngIf="dataStateService.showNoDataOverlay"\n        [noRecordsTemplate]="noRecordsTemplate"\n      >\n      </ng-data-table-no-data-body>\n    </div>\n  </div>\n  <ng-data-table-pagination *ngIf="config.pageable && dataStateService.itemCount"></ng-data-table-pagination>\n</div>\n',providers:[h,f,z,g,y,_,{provide:i.NG_VALUE_ACCESSOR,useExisting:t.forwardRef(function(){return e}),multi:!0}]}]}],e.ctorParameters=function(){return[{type:D},{type:z},{type:P},{type:f},{type:_},{type:t.NgZone},{type:g},{type:y},{type:h}]},e.propDecorators={columns:[{type:t.ContentChildren,args:[S]}],rowExpandTemplate:[{type:t.ContentChild,args:["ngDataTableRowExpand",{static:!0}]}],noRecordsTemplate:[{type:t.ContentChild,args:["ngDataTableNoRecords",{static:!0}]}],loadingSpinnerTemplate:[{type:t.ContentChild,args:["ngDataTableLoadingSpinner",{static:!0}]}],rowExpandLoadingSpinnerTemplate:[{type:t.ContentChild,args:["ngDataTableRowExpandLoadingSpinner",{static:!0}]}],dataTableElement:[{type:t.ViewChild,args:["dataTableElement",{static:!0}]}],init:[{type:t.Output}],rowSelectChange:[{type:t.Output}],rowClick:[{type:t.Output}],rowDoubleClick:[{type:t.Output}],headerClick:[{type:t.Output}],allRowSelectChange:[{type:t.Output}],cellClick:[{type:t.Output}],dataBound:[{type:t.Output}],rowBind:[{type:t.Output}],columnBind:[{type:t.Output}],cellBind:[{type:t.Output}],onDataBind:[{type:t.Input}],onFilterValueExtract:[{type:t.Input}],onDynamicRowSpanExtract:[{type:t.Input}],items:[{type:t.Input}],dataSource:[{type:t.Input}],id:[{type:t.Input}],persistTableState:[{type:t.Input}],storageMode:[{type:t.Input}],multiColumnSortable:[{type:t.Input}],showHeader:[{type:t.Input}],title:[{type:t.Input}],width:[{type:t.Input}],minContentHeight:[{type:t.Input}],minContentWidth:[{type:t.Input}],contentHeight:[{type:t.Input}],pageable:[{type:t.Input}],loadOnScroll:[{type:t.Input}],loadViewDistanceRatio:[{type:t.Input}],showIndexColumn:[{type:t.Input}],indexColumnTitle:[{type:t.Input}],rowSelectable:[{type:t.Input}],selectMode:[{type:t.Input}],showRowSelectCheckbox:[{type:t.Input}],showRowSelectAllCheckbox:[{type:t.Input}],showSubstituteRows:[{type:t.Input}],expandableRows:[{type:t.Input}],selectOnRowClick:[{type:t.Input}],expandOnRowClick:[{type:t.Input}],autoFetch:[{type:t.Input}],showLoadingSpinner:[{type:t.Input}],selectTrackBy:[{type:t.Input}],selectedRow:[{type:t.Input}],selectedRows:[{type:t.Input}],filterDebounceTime:[{type:t.Input}],filterDebounce:[{type:t.Input}],showRefreshButton:[{type:t.Input}],showColumnSelector:[{type:t.Input}],columnSelectorWidth:[{type:t.Input}],expanderColumnWidth:[{type:t.Input}],indexColumnWidth:[{type:t.Input}],selectionColumnWidth:[{type:t.Input}],translations:[{type:t.Input}],showRowExpandLoadingSpinner:[{type:t.Input}],offset:[{type:t.Input}],limit:[{type:t.Input}],page:[{type:t.Input}]},e}();var G=function(){function e(e,t,n){this.config=e,this.dataStateService=t,this.eventStateService=n}return e.prototype.dataRowTrackBy=function(e,t){return t.index},e.prototype.isOddRow=function(e){return e.index%2==0},e.prototype.isEvenRow=function(e){return e.index%2==1},e.prototype.isOddSubstituteRow=function(e){return(e+this.dataStateService.substituteRows.length)%2==0},e.prototype.isEvenSubstituteRow=function(e){return(e+this.dataStateService.substituteRows.length)%2==1},e.prototype.onRowExpand=function(e,t){t.expanded=!t.expanded,this.config.showRowExpandLoadingSpinner||(t.dataLoaded=!0)},e.prototype.onRowInit=function(e){this.eventStateService.rowBindStream.emit(e)},e.prototype.onCellInit=function(e,t){this.eventStateService.cellBindStream.emit({column:e,row:t})},e.prototype.cellClicked=function(e,t,n){this.eventStateService.cellClickStream.emit({row:t,column:e,event:n})},e.prototype.getRowSpanCollection=function(e){return Array.from({length:this.dataStateService.onDynamicRowSpanExtract(e)})},Object.defineProperty(e.prototype,"totalColumnCount",{get:function(){var e=0;return e+=this.config.showIndexColumn?1:0,e+=this.config.showRowSelectCheckboxColumn?1:0,e+=this.config.expandableRows?1:0,this.columns.forEach(function(t){e+=t.visible?1:0}),e},enumerable:!0,configurable:!0}),e.prototype.onRowSelectClick=function(e,t){if("single"===this.config.selectMode){var n=O(e.item,this.config.selectTrackBy);this.dataStateService.selectedRow===n&&(t.preventDefault(),e.selected=!0)}},e.prototype.onRowSelectChange=function(e){var t=O(e.item,this.config.selectTrackBy);switch(this.config.selectMode){case"multi":var n=this.dataStateService.selectedRows.indexOf(t);e.selected&&n<0?this.dataStateService.selectedRows.push(t):!e.selected&&n>-1&&this.dataStateService.selectedRows.splice(n,1);var i=this.dataStateService.allRowSelected;this.dataStateService.allRowSelected=this.dataStateService.dataRows.every(function(e){return e.selected}),this.eventStateService.rowSelectChangeStream.emit(this.dataStateService.selectedRows),i!==this.dataStateService.allRowSelected&&this.eventStateService.allRowSelectChangeStream.emit(this.dataStateService.allRowSelected);break;case"single_toggle":e.selected?(this.dataStateService.selectedRow=t,this.dataStateService.dataRows.forEach(function(t){t!==e&&(t.selected=!1)})):this.dataStateService.selectedRow=void 0,this.eventStateService.rowSelectChangeStream.emit(this.dataStateService.selectedRow);break;case"single":var o=this.dataStateService.selectedRow;this.dataStateService.selectedRow=t,e.selected=!0,this.dataStateService.dataRows.forEach(function(t){t!==e&&(t.selected=!1)}),o!==t&&this.eventStateService.rowSelectChangeStream.emit(this.dataStateService.selectedRow)}},e.prototype.rowClicked=function(e,t){if(this.config.selectOnRowClick||this.config.expandableRows&&this.config.expandOnRowClick){var n=t.target;if(n&&n.classList&&n.classList.contains("ng-ignore-propagation"))return;this.config.rowSelectable&&this.config.selectOnRowClick&&(e.selected=!e.selected,this.onRowSelectChange(e)),this.config.expandOnRowClick&&(e.expanded=!e.expanded)}this.eventStateService.rowClickStream.emit({row:e,event:t})},e.prototype.rowDoubleClicked=function(e,t){this.eventStateService.rowDoubleClickStream.emit({row:e,event:t})},Object.defineProperty(e.prototype,"hasSubstituteRows",{get:function(){return!this.config.loadOnScroll&&this.config.showSubstituteRows&&this.dataStateService.dataRows.length&&!this.dataStateService.showNoDataOverlay},enumerable:!0,configurable:!0}),e.prototype.getFieldValue=function(e,t){return O(e.item,t.field)},Object.defineProperty(e.prototype,"showRowSelectCheckbox",{get:function(){return this.config.rowSelectable&&this.config.showRowSelectCheckbox},enumerable:!0,configurable:!0}),e.prototype.isRowExpanderLoading=function(e){return e.expanded&&!e.dataLoaded},e.decorators=[{type:t.Component,args:[{exportAs:"ngDataTableBody",selector:"[ngDataTableBody]",template:'<ng-container *ngFor="let row of dataStateService.dataRows; trackBy: dataRowTrackBy; let i = index;">\n  <ng-container *ngFor="let ignored of getRowSpanCollection(row); let rowSpanIndex = index; let rowSpanCount = count">\n    <tr\n      class="ng-data-table-row"\n      (ngInit)="onRowInit(row)"\n      [attr.title]="row.tooltip"\n      [class.row-odd]="isOddRow(row)"\n      [class.row-even]="isEvenRow(row)"\n      [class.selected]="row.selected"\n      [class.clickable]="config.selectOnRowClick"\n      [class.disabled]="row.disabled"\n      [ngClass]="row.cssClass"\n      (dblclick)="rowDoubleClicked(row, $event)"\n      (click)="rowClicked(row, $event)"\n    >\n      <td\n        class="ng-data-table-row-expand-button ng-ignore-propagation"\n        [style.background-color]="row.color"\n        *ngIf="config.expandableRows && !rowSpanIndex"\n        (click)="onRowExpand($event, row)"\n        [attr.rowspan]="rowSpanCount"\n      >\n        <div [hidden]="config.showRowExpandLoadingSpinner && isRowExpanderLoading(row)">\n          <span class="ng-data-table-expander-collapsed-icon ng-ignore-propagation" *ngIf="!row.expanded"></span>\n          <span class="ng-data-table-expander-expanded-icon ng-ignore-propagation" *ngIf="row.expanded"></span>\n        </div>\n        <ng-data-table-loading-spinner\n          *ngIf="config.showRowExpandLoadingSpinner"\n          [loadingSpinnerTemplate]="rowExpandLoadingSpinnerTemplate"\n          [isLoading]="isRowExpanderLoading(row)"\n          [showOverlay]="false"\n        >\n        </ng-data-table-loading-spinner>\n      </td>\n      <td\n        class="index-column"\n        [style.background-color]="row.color"\n        *ngIf="config.showIndexColumn && !rowSpanIndex"\n        [textContent]="row.index"\n        [attr.rowspan]="rowSpanCount"\n      >\n      </td>\n      <td\n        class="ng-data-table-select-column"\n        [style.background-color]="row.color"\n        *ngIf="showRowSelectCheckbox && !rowSpanIndex"\n        [attr.rowspan]="rowSpanCount"\n      >\n        <div class="ng-data-table-checkbox-container ng-ignore-propagation">\n          <input class="ng-data-table-checkbox-input ng-ignore-propagation" type="checkbox"\n            [id]="dataStateService.getUniqueId(\'dr\', i)"\n            [(ngModel)]="row.selected"\n            (click)="onRowSelectClick(row, $event)"\n            (change)="onRowSelectChange(row)"\n          />\n          <label class="ng-ignore-propagation" [for]="dataStateService.getUniqueId(\'dr\', i)"></label>\n        </div>\n      </td>\n      <ng-container *ngFor="let column of columns">\n        <ng-container *ngIf="column.visible">\n          <td\n            class="ng-data-table-data-column"\n            *ngIf="!column.cellTemplate && !rowSpanIndex"\n            (ngInit)="onCellInit(column, row)"\n            [ngClass]="column.cssClass"\n            [attr.rowspan]="rowSpanCount"\n            [style.background-color]="column.getCellColor(row) || row.color"\n            (click)="cellClicked(column, row, $event)"\n          >\n            <span>{{ getFieldValue(row, column) }}</span>\n          </td>\n          <ng-container\n            *ngIf="column.cellTemplate"\n            [ngTemplateOutlet]="column.cellTemplate"\n            [ngTemplateOutletContext]="{ column: column, row: row, spanIndex: rowSpanIndex, rowSpan: rowSpanCount }"\n          >\n          </ng-container>\n        </ng-container>\n      </ng-container>\n    </tr>\n  </ng-container>\n  <tr *ngIf="config.expandableRows" [hidden]="!row.expanded" class="ng-data-table-row-expansion">\n    <td [attr.colspan]="totalColumnCount">\n      <ng-container [ngTemplateOutlet]="rowExpandTemplate" [ngTemplateOutletContext]="{ row: row }"> </ng-container>\n    </td>\n  </tr>\n</ng-container>\n<ng-container *ngIf="hasSubstituteRows">\n  <tr\n    *ngFor="let ignored of dataStateService.substituteRows; let index = index"\n    [class.row-odd]="isOddSubstituteRow(index)"\n    [class.row-even]="isEvenSubstituteRow(index)"\n  >\n    <td *ngIf="config.expandableRows">&nbsp;</td>\n    <td *ngIf="config.showIndexColumn">&nbsp;</td>\n    <td *ngIf="showRowSelectCheckbox">&nbsp;</td>\n    <ng-container *ngFor="let column of columns">\n      <td *ngIf="column.visible">&nbsp;</td>\n    </ng-container>\n  </tr>\n</ng-container>\n'}]}],e.ctorParameters=function(){return[{type:h},{type:g},{type:f}]},e.propDecorators={columns:[{type:t.Input}],rowExpandTemplate:[{type:t.Input}],rowExpandLoadingSpinnerTemplate:[{type:t.Input}]},e}();var U=function(){function e(e,t){this.config=e,this.eventStateService=t}return e.prototype.resetFilters=function(){this.eventStateService.dataFetchStream.emit(m.HARD_RELOAD)},Object.defineProperty(e.prototype,"showDefaultNoDataTemplate",{get:function(){return!(this.noRecordsTemplate||!this.config.translations.noDataMessage)},enumerable:!0,configurable:!0}),e.decorators=[{type:t.Component,args:[{selector:"ng-data-table-no-data-body",template:'<div class="ng-data-table-no-records-message" *ngIf="showDefaultNoDataTemplate">\n  <h1 class="ng-data-table-no-records-main-heading-message">{{ config.translations.noDataMessage.header }}</h1>\n  <h2 class="ng-data-table-no-records-sub-heading-message">{{ config.translations.noDataMessage.body }}</h2>\n  <button (click)="resetFilters()" class="ng-data-table-no-records-message-button">Reload Data</button>\n</div>\n<ng-template *ngIf="noRecordsTemplate" [ngTemplateOutlet]="noRecordsTemplate"></ng-template>\n'}]}],e.ctorParameters=function(){return[{type:h},{type:f}]},e.propDecorators={noRecordsTemplate:[{type:t.Input}]},e}();var $=function(){function e(){}return Object.defineProperty(e.prototype,"hasFilterColumns",{get:function(){return this.columns.some(function(e){return e.filterable})},enumerable:!0,configurable:!0}),e.decorators=[{type:t.Component,args:[{exportAs:"ngDataTableHead",selector:"[ngDataTableHead]",template:'<tr ngDataTableColumnTitleHeader [columns]="columns"></tr>\n<tr *ngIf="hasFilterColumns" ngDataTableColumnFilterHeader [columns]="columns"></tr>\n'}]}],e.propDecorators={columns:[{type:t.Input}]},e}();var K=function(){function e(e,t){this.config=e,this.dataStateService=t}return e.decorators=[{type:t.Component,args:[{selector:"ng-data-table-loading-spinner",template:'<div class="ng-data-table-loading-spinner" [hidden]="!isLoading">\n  <div *ngIf="loadingSpinnerTemplate" class="ng-data-table-loading-cover">\n    <div [ngTemplateOutlet]="loadingSpinnerTemplate"></div>\n  </div>\n  <div class="ng-data-table-loading-cover" [class.ng-data-table-show-overlay]="showOverlay" *ngIf="!loadingSpinnerTemplate">\n    <div class="ng-data-table-loading-animation"></div>\n  </div>\n</div>\n'}]}],e.ctorParameters=function(){return[{type:h},{type:g}]},e.propDecorators={loadingSpinnerTemplate:[{type:t.Input}],isLoading:[{type:t.Input}],showOverlay:[{type:t.Input}]},e}();var Z=function(){function e(e,t){this.el=e,this.zone=t}return e.prototype.ngAfterViewInit=function(){var e=this;this.zone.runOutsideAngular(function(){e.scrollEventSubscription=o.fromEvent(e.el.nativeElement,"scroll").pipe(r.map(function(){return{scrollLeft:e.el.nativeElement.scrollLeft,scrollTop:e.el.nativeElement.scrollTop,scrollHeight:e.el.nativeElement.scrollHeight,scrollWidth:e.el.nativeElement.scrollWidth,clientHeight:e.el.nativeElement.clientHeight,clientWidth:e.el.nativeElement.clientWidth}}),r.pairwise(),r.map(function(e){var t=p(e,2),n=t[0],i=t[1];return s({},i,{isHorizontal:n.scrollLeft!==i.scrollLeft,isVertical:n.scrollTop!==i.scrollTop})})).subscribe(function(t){e.ngScrollPosition.next(t)})})},e.prototype.ngOnDestroy=function(){this.scrollEventSubscription&&this.scrollEventSubscription.unsubscribe(),this.ngScrollPosition.complete()},e.decorators=[{type:t.Directive,args:[{selector:"[ngScrollPosition]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:t.NgZone}]},e.propDecorators={ngScrollPosition:[{type:t.Input}]},e}();var Q=function(){function e(e){this.el=e}return e.prototype.ngAfterViewInit=function(){var e=this;this.scrollPositionSubscription=this.ngScrollElement.subscribe(function(t){e.el.nativeElement.scrollLeft=t.scrollLeft})},e.prototype.ngOnDestroy=function(){this.scrollPositionSubscription&&this.scrollPositionSubscription.unsubscribe()},e.decorators=[{type:t.Directive,args:[{selector:"[ngScrollElement]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef}]},e.propDecorators={ngScrollElement:[{type:t.Input}]},e}();var X=function(){function e(e){this.el=e,this.ngElementWidth=new t.EventEmitter}return e.prototype.ngAfterViewInit=function(){this.ngElementWidth.emit(this.el.nativeElement.clientWidth)},e.decorators=[{type:t.Directive,args:[{selector:"[ngElementWidth]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef}]},e.propDecorators={ngElementWidth:[{type:t.Output}]},e}();var Y=new t.InjectionToken("dropdownConfig"),J=function(){function e(e){this.dropdownConfig=e,this.baseTranslations={noDataMessage:"No Results Available",filterPlaceholder:"Search",selectedOptionWrapPlaceholder:"Options",selectPlaceholder:"Select"},this.selectTrackBy="key",this.displayTrackBy="value",this.disabledTrackBy="disabled",this.menuPosition="bottom-left",this.selectMode="single-toggle",this.filterable=!1,this.filterDebounce=!0,this.filterDebounceTime=500,this.groupByField=void 0,this.wrapDisplaySelectLimit=void 0,this.showSelectedOptionRemoveButton=!1,this.showClearSelectionButton=!1,this.menuWidth=320,this.menuHeight=250,this.loadOnScroll=!1,this.loadViewDistanceRatio=1,this.limit=15,this.loadDataOnInit=!0,this.closeMenuOnSelect=!1,this.showOptionSelectCheckbox=!1,this.showOptionIndex=!1,this.showOptionTrackBy=!1,this.multiSelectOptionMaxWidth=135,this.setFirstOptionSelected=!1,this.triggerSelectChangeOnInit=!1,this.triggerSelectChangeOnModelUpdate=!1,this.triggerSelectChangeOnFirstOptionSelect=!1,this.dynamicDimensionCalculation=!1,this.dynamicWidthRatio=1,this.dynamicHeightRatio=.5,this.relativeParentElement=void 0,e&&Object.assign(this,e)}return Object.defineProperty(e.prototype,"translations",{get:function(){return this.baseTranslations},set:function(e){this.baseTranslations=s({},this.baseTranslations,e)},enumerable:!0,configurable:!0}),e.prototype.getDisplayText=function(e){return O(e,this.displayTrackBy)},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[Y]}]}]},e}();var ee=function(){function e(){this.dataLoading=!1,this.selectedOptions=[],this.offset=0,this.currentOptionCount=0,this.dropdownOptions=[],this.dropdownOptionGroups=[],this.filterText="",this.disabled=!1}return e.prototype.getUniqueId=function(e,t){return this.id+"-chk-"+e+"-"+t},e.decorators=[{type:t.Injectable}],e}();var te=function(){function e(){this.dataFetchStream=new t.EventEmitter,this.dataBoundStream=new t.EventEmitter,this.selectChangeStream=new t.EventEmitter,this.initStream=new t.EventEmitter,this.staticDataSourceStream=new o.ReplaySubject(1)}return e.decorators=[{type:t.Injectable}],e}();var ne=function(){function e(e,t,n){this.config=e,this.dataStateService=t,this.eventStateService=n,this.scrollEvent=new o.Subject}return e.prototype.ngOnInit=function(){var e=this;this.scrollEventSubscription=this.scrollEvent.pipe(r.debounceTime(100)).subscribe(function(t){e.checkScrollPosition(t)})},e.prototype.ngOnDestroy=function(){this.scrollEventSubscription&&this.scrollEventSubscription.unsubscribe()},e.prototype.checkScrollPosition=function(e){var t=e.target.scrollTop,n=e.target.scrollHeight,i=e.target.clientHeight;t>=n-(1+this.config.loadViewDistanceRatio)*i-1-1&&this.dataStateService.currentOptionCount<this.dataStateService.totalOptionCount&&!this.dataStateService.dataLoading&&(this.dataStateService.dataLoading=!0,this.dataStateService.offset=this.dataStateService.offset+this.config.limit,this.eventStateService.dataFetchStream.emit(!1))},e.decorators=[{type:t.Component,args:[{selector:"ng-dropdown-view",template:'<div class="ng-dropdown-menu-wrapper"\n  [class.ng-dropdown-option-list]="!this.config.filterable"\n  [style.width]="config.menuWidth | ngPx"\n  [style.height]="config.menuHeight | ngPx">\n  <div class="ng-dropdown-filter-wrapper" *ngIf="config.filterable">\n    <ng-dropdown-filter></ng-dropdown-filter>\n  </div>\n  <div class="ng-dropdown-option-container-wrapper" (scroll)="config.loadOnScroll ? scrollEvent.next($event) : null">\n    <ng-dropdown-options></ng-dropdown-options>\n  </div>\n</div>\n'}]}],e.ctorParameters=function(){return[{type:J},{type:ee},{type:te}]},e}();var ie=function(){function e(){}return e.prototype.setDataSource=function(e){var t=this;this.dispose(),this.optionDataStream&&!this.optionDataStream.closed&&this.optionDataStream.complete(),this.optionDataStream=new o.ReplaySubject(1),this.dataSourceSubscription=e.subscribe(function(e){t.optionDataStream.next(e)})},e.prototype.query=function(e){return this.optionDataStream.pipe(r.switchMap(function(t){var n=t.slice();if(e.filter&&e.filter.value){var i=String(e.filter.value).toLowerCase();n=n.filter(function(t){return String(O(t,e.filter.key)).toLowerCase().includes(i)})}if(void 0!==e.offset){var r=e.offset+1>n.length?0:e.offset;n=void 0===e.limit?n.slice(r,n.length):n.slice(r,r+e.limit)}return o.of({options:n,count:t.length})}))},e.prototype.dispose=function(){this.dataSourceSubscription&&(this.dataSourceSubscription.unsubscribe(),this.dataSourceSubscription=null),this.optionDataStream&&!this.optionDataStream.closed&&this.optionDataStream.complete()},e.decorators=[{type:t.Injectable}],e}();var oe=function(){function e(e,t,n,i,o,r,a){this.componentLoaderFactory=e,this.injector=t,this.eventStateService=n,this.dropdownResourceService=i,this.renderer=o,this.dataStateService=r,this.config=a,this.dataStateService.componentLoaderRef=this.componentLoaderFactory.createLoader(this.renderer),this.dataBound=this.eventStateService.dataBoundStream,this.selectChange=this.eventStateService.selectChangeStream,this.init=this.eventStateService.initStream}return Object.defineProperty(e.prototype,"optionTemplate",{set:function(e){this.dataStateService.dropdownOptionTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"optionGroupHeaderTemplate",{set:function(e){this.dataStateService.dropdownOptionGroupHeaderTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onDataBind",{set:function(e){this.dataStateService.onDataBind=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loadingSpinnerTemplateRef",{set:function(e){this.loadingSpinnerTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"optionTemplateRef",{set:function(e){this.optionTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"optionGroupHeaderTemplateRef",{set:function(e){this.optionGroupHeaderTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{set:function(e){e&&this.eventStateService.staticDataSourceStream.next(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataSource",{set:function(e){this.initDataSource(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{set:function(e){if(!E.idPatternValidatorExpression.test(e))throw Error('Invalid [id] input value. Unique identifier parameter only accept string begin with a letter ([A-Za-z]) and may be followed by any number of letters, digits ([0-9]), hyphens ("-"), underscores ("_").');this.dataStateService.id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"translations",{set:function(e){this.config.translations=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectTrackBy",{set:function(e){this.config.selectTrackBy=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayTrackBy",{set:function(e){this.config.displayTrackBy=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupByField",{set:function(e){this.config.groupByField=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabledTrackBy",{set:function(e){this.config.disabledTrackBy=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedOptions",{set:function(e){this.dataStateService.selectedOptions=e||[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedOption",{set:function(e){this.dataStateService.selectedOption=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"limit",{set:function(e){this.config.limit=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapDisplaySelectLimit",{set:function(e){this.config.wrapDisplaySelectLimit=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loadOnScroll",{set:function(e){this.config.loadOnScroll=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loadViewDistanceRatio",{set:function(e){this.config.loadViewDistanceRatio=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectMode",{set:function(e){this.config.selectMode=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterable",{set:function(e){this.config.filterable=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterText",{set:function(e){this.dataStateService.filterText=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterDebounce",{set:function(e){this.config.filterDebounce=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterDebounceTime",{set:function(e){this.config.filterDebounceTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loadDataOnInit",{set:function(e){this.config.loadDataOnInit=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSelectedOptionRemoveButton",{set:function(e){this.config.showSelectedOptionRemoveButton=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showClearSelectionButton",{set:function(e){this.config.showClearSelectionButton=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"menuWidth",{set:function(e){this.config.menuWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"menuHeight",{set:function(e){this.config.menuHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"menuPosition",{set:function(e){this.config.menuPosition=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{set:function(e){this.dataStateService.disabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closeMenuOnSelect",{set:function(e){this.config.closeMenuOnSelect=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showOptionSelectCheckbox",{set:function(e){this.config.showOptionSelectCheckbox=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showOptionIndex",{set:function(e){this.config.showOptionIndex=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showOptionTrackBy",{set:function(e){this.config.showOptionTrackBy=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multiSelectOptionMaxWidth",{set:function(e){this.config.multiSelectOptionMaxWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setFirstOptionSelected",{set:function(e){this.config.setFirstOptionSelected=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"triggerSelectChangeOnInit",{set:function(e){this.config.triggerSelectChangeOnInit=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"triggerSelectChangeOnModelUpdate",{set:function(e){this.config.triggerSelectChangeOnModelUpdate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"triggerSelectChangeOnFirstOptionSelect",{set:function(e){this.config.triggerSelectChangeOnFirstOptionSelect=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dynamicDimensionCalculation",{set:function(e){this.config.dynamicDimensionCalculation=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dynamicWidthRatio",{set:function(e){this.config.dynamicWidthRatio=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dynamicHeightRatio",{set:function(e){this.config.dynamicHeightRatio=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeParentElement",{set:function(e){this.config.relativeParentElement=e},enumerable:!0,configurable:!0}),e.prototype.initDataSource=function(e){var t=this;this.dropdownResourceService.setDataSource(e),this.dataStateService.onDataBind=function(n){return n.hardReload&&t.dropdownResourceService.setDataSource(e),t.dropdownResourceService.query(n)}},e.prototype.toggleDropdown=function(e,t){var n=e.target;n&&n.classList&&n.classList.contains("ng-ignore-propagation")||(this.dataStateService.componentLoaderRef.toggle(ne,t,this.injector,{relativeParentElement:this.config.relativeParentElement,position:this.config.menuPosition}),this.config.dynamicDimensionCalculation&&(this.config.menuWidth=t.offsetWidth*this.config.dynamicWidthRatio,this.config.menuHeight=t.offsetWidth*this.config.dynamicHeightRatio))},Object.defineProperty(e.prototype,"wrapSelectedOptions",{get:function(){return void 0!==this.config.wrapDisplaySelectLimit&&this.dataStateService.selectedOptions.length>this.config.wrapDisplaySelectLimit},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrappedOptionDisplayText",{get:function(){return"("+this.dataStateService.selectedOptions.length+") "+this.config.translations.selectedOptionWrapPlaceholder},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.onSelectChangeSubscription&&this.onSelectChangeSubscription.unsubscribe(),this.dataStateService.componentLoaderRef.dispose()},Object.defineProperty(e.prototype,"hasSelectedOptions",{get:function(){return"multi"===this.config.selectMode?!!this.dataStateService.selectedOptions.length:!!this.dataStateService.selectedOption},enumerable:!0,configurable:!0}),e.prototype.triggerSelectChange=function(){"multi"===this.config.selectMode?this.eventStateService.selectChangeStream.emit(this.dataStateService.selectedOptions):this.eventStateService.selectChangeStream.emit(this.dataStateService.selectedOption)},e.prototype.clearSelectedOptions=function(){"multi"===this.config.selectMode?(this.dataStateService.selectedOptions=[],this.eventStateService.selectChangeStream.emit(this.dataStateService.selectedOptions)):(this.dataStateService.selectedOption=void 0,this.eventStateService.selectChangeStream.emit(this.dataStateService.selectedOption))},e.prototype.setDisabledState=function(e){this.dataStateService.disabled=e},e.prototype.writeValue=function(e){"multi"===this.config.selectMode?this.dataStateService.selectedOptions=e||[]:this.dataStateService.selectedOption=e,this.config.triggerSelectChangeOnModelUpdate&&this.triggerSelectChange()},e.prototype.registerOnChange=function(e){this.onSelectChangeSubscription=this.selectChange.subscribe(function(t){e(t)})},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){if(!this.dataStateService.id)throw Error("Missing required parameter value for [id] input.");this.dataStateService.onDataBind||(this.dataSource=this.eventStateService.staticDataSourceStream),this.initDataFetchEvent(),this.config.loadDataOnInit&&this.eventStateService.dataFetchStream.emit(!1),this.config.triggerSelectChangeOnInit&&this.triggerSelectChange(),this.eventStateService.initStream.emit(this)},e.prototype.mapDropdownOption=function(e,t){var n=O(e,this.config.selectTrackBy);return{disabled:O(e,this.config.disabledTrackBy),id:n,index:t+this.dataStateService.offset+1,option:e,text:O(e,this.config.displayTrackBy)}},e.prototype.setDropdownOptions=function(e){var t=this;this.config.groupByField?this.dataStateService.dropdownOptionGroups=e.options.reduce(function(e,n,i){var o=O(n,t.config.groupByField),r=e.find(function(e){return e.groupName===o});return r?r.options.push(t.mapDropdownOption(n,i)):e.push({groupName:o,options:[t.mapDropdownOption(n,i)]}),e},this.config.loadOnScroll&&this.dataStateService.offset>0?this.dataStateService.dropdownOptionGroups:[]):this.dataStateService.dropdownOptions=e.options.reduce(function(e,n,i){return e.push(t.mapDropdownOption(n,i)),e},this.config.loadOnScroll&&this.dataStateService.offset>0?this.dataStateService.dropdownOptions:[]),this.config.setFirstOptionSelected&&e.options.length&&("multi"===this.config.selectMode?this.dataStateService.selectedOptions=[e.options[0]]:this.dataStateService.selectedOption=e.options[0],this.config.triggerSelectChangeOnFirstOptionSelect&&this.triggerSelectChange()),this.dataStateService.totalOptionCount=e.count,this.dataStateService.currentOptionCount+=e.options.length},e.prototype.onAfterDataBind=function(e){this.setDropdownOptions(e),this.dataStateService.dataLoading=!1,this.eventStateService.dataBoundStream.emit()},e.prototype.fetchQueryResults=function(e){this.dataStateService.dataLoading=!0,e&&(this.dataStateService.offset=0,this.dataStateService.filterText="");var t={hardReload:e};return this.config.loadOnScroll&&(t.limit=this.config.limit,t.offset=this.dataStateService.offset),this.config.filterable&&(t.filter={key:this.config.displayTrackBy,value:this.dataStateService.filterText}),this.dataStateService.onDataBind(t)},e.prototype.initDataFetchEvent=function(){var e=this,t={options:[],count:0};this.eventStateService.dataFetchStream.pipe(r.debounceTime(20),r.switchMap(function(t){return e.fetchQueryResults(t)}),r.catchError(function(){return o.of(t)})).subscribe(function(t){e.onAfterDataBind(t)},function(){e.onAfterDataBind(t)})},e.prototype.fetchData=function(e){void 0===e&&(e=!1),this.eventStateService.dataFetchStream.emit(e)},e.prototype.onSelectOptionRemove=function(e){this.dataStateService.selectedOptions.splice(e,1),this.eventStateService.selectChangeStream.emit(this.dataStateService.selectedOptions)},e.prototype.close=function(){this.dataStateService.componentLoaderRef.hide()},e.decorators=[{type:t.Component,args:[{selector:"ng-dropdown",template:'<div #dropdownElement class="ng-dropdown">\n  <div class="ng-dropdown-toggle" (click)="toggleDropdown($event, dropdownElement)" [class.disabled]="dataStateService.disabled">\n    <ng-container *ngIf="config.selectMode === \'multi\'">\n      <ng-container *ngIf="!wrapSelectedOptions">\n        <span class="ng-dropdown-selected-value"\n          *ngFor="let option of dataStateService.selectedOptions; let index = index"\n          [style.max-width]="config.multiSelectOptionMaxWidth | ngPx"\n          [class.ng-dropdown-option-close-enabled]="config.showSelectedOptionRemoveButton">\n          {{ config.getDisplayText(option) }}\n          <i class="ng-dropdown-remove-selected-value ng-ignore-propagation"\n            *ngIf="config.showSelectedOptionRemoveButton"\n            (click)="onSelectOptionRemove(index)"></i>\n        </span>\n      </ng-container>\n      <span class="ng-dropdown-selected-option" *ngIf="wrapSelectedOptions">\n        {{ wrappedOptionDisplayText }}\n      </span>\n      <span class="ng-dropdown-selected-placeholder" *ngIf="!dataStateService.selectedOptions.length">\n        {{ config.translations.selectPlaceholder }}\n      </span>\n    </ng-container>\n    <ng-container *ngIf="config.selectMode !== \'multi\'">\n      <span class="ng-dropdown-selected-option" *ngIf="dataStateService.selectedOption">\n        {{ config.getDisplayText(dataStateService.selectedOption) }}\n      </span>\n      <span class="ng-dropdown-selected-placeholder" *ngIf="!dataStateService.selectedOption">\n        {{ config.translations.selectPlaceholder }}\n      </span>\n    </ng-container>\n    <span class="ng-dropdown-input-group-btn" [hidden]="!hasSelectedOptions" *ngIf="config.showClearSelectionButton">\n      <div class="ng-dropdown-delete-button ng-ignore-propagation" (click)="clearSelectedOptions()"></div>\n    </span>\n    <span class="ng-dropdown-down-arrow" *ngIf="!dataStateService.dataLoading"></span>\n    <span class="ng-dropdown-loading" [hidden]="!dataStateService.dataLoading">\n      <div class="ng-dropdown-loading-animation" *ngIf="!loadingSpinnerTemplate"></div>\n      <div *ngIf="loadingSpinnerTemplate" [ngTemplateOutlet]="loadingSpinnerTemplate"></div>\n    </span>\n  </div>\n</div>\n',providers:[J,ee,te,ie,{provide:i.NG_VALUE_ACCESSOR,useExisting:t.forwardRef(function(){return e}),multi:!0}]}]}],e.ctorParameters=function(){return[{type:k},{type:t.Injector},{type:te},{type:ie},{type:t.Renderer2},{type:ee},{type:J}]},e.propDecorators={loadingSpinnerTemplate:[{type:t.ContentChild,args:["ngDropdownLoadingSpinner",{static:!0}]}],optionTemplate:[{type:t.ContentChild,args:["ngDropdownOption",{static:!0}]}],optionGroupHeaderTemplate:[{type:t.ContentChild,args:["ngDropdownOptionGroupHeader",{static:!0}]}],init:[{type:t.Output}],selectChange:[{type:t.Output}],dataBound:[{type:t.Output}],onDataBind:[{type:t.Input}],loadingSpinnerTemplateRef:[{type:t.Input}],optionTemplateRef:[{type:t.Input}],optionGroupHeaderTemplateRef:[{type:t.Input}],options:[{type:t.Input}],dataSource:[{type:t.Input}],id:[{type:t.Input}],translations:[{type:t.Input}],selectTrackBy:[{type:t.Input}],displayTrackBy:[{type:t.Input}],groupByField:[{type:t.Input}],disabledTrackBy:[{type:t.Input}],selectedOptions:[{type:t.Input}],selectedOption:[{type:t.Input}],limit:[{type:t.Input}],wrapDisplaySelectLimit:[{type:t.Input}],loadOnScroll:[{type:t.Input}],loadViewDistanceRatio:[{type:t.Input}],selectMode:[{type:t.Input}],filterable:[{type:t.Input}],filterText:[{type:t.Input}],filterDebounce:[{type:t.Input}],filterDebounceTime:[{type:t.Input}],loadDataOnInit:[{type:t.Input}],showSelectedOptionRemoveButton:[{type:t.Input}],showClearSelectionButton:[{type:t.Input}],menuWidth:[{type:t.Input}],menuHeight:[{type:t.Input}],menuPosition:[{type:t.Input}],disabled:[{type:t.Input}],closeMenuOnSelect:[{type:t.Input}],showOptionSelectCheckbox:[{type:t.Input}],showOptionIndex:[{type:t.Input}],showOptionTrackBy:[{type:t.Input}],multiSelectOptionMaxWidth:[{type:t.Input}],setFirstOptionSelected:[{type:t.Input}],triggerSelectChangeOnInit:[{type:t.Input}],triggerSelectChangeOnModelUpdate:[{type:t.Input}],triggerSelectChangeOnFirstOptionSelect:[{type:t.Input}],dynamicDimensionCalculation:[{type:t.Input}],dynamicWidthRatio:[{type:t.Input}],dynamicHeightRatio:[{type:t.Input}],relativeParentElement:[{type:t.Input}]},e}();var re=function(){function e(e,t,n){this.config=e,this.dataStateService=t,this.eventStateService=n,this.dataFilterStream=new o.Subject}return e.prototype.clearFilter=function(){this.dataStateService.offset=0,this.dataStateService.filterText="",this.eventStateService.dataFetchStream.emit(!1)},e.prototype.filterKeyUp=function(){this.config.filterDebounce?this.dataFilterStream.next(this.dataStateService.filterText):(this.dataStateService.offset=0,this.eventStateService.dataFetchStream.emit(!1))},e.prototype.initFilterDebounceEvent=function(){var e=this;this.dataFilterSubscription=this.dataFilterStream.pipe(r.debounceTime(this.config.filterDebounceTime)).subscribe(function(){e.dataStateService.offset=0,e.eventStateService.dataFetchStream.emit(!1)})},e.prototype.ngOnDestroy=function(){this.dataFilterSubscription&&this.dataFilterSubscription.unsubscribe()},e.prototype.ngOnInit=function(){this.initFilterDebounceEvent()},e.decorators=[{type:t.Component,args:[{selector:"ng-dropdown-filter",template:'<div class="ng-dropdown-search">\n  <div class="ng-dropdown-input-group">\n    <span class="ng-dropdown-input-group-addon"></span>\n    <input\n      type="text"\n      class="ng-dropdown-input"\n      ngFocus\n      [attr.placeholder]="config.translations.filterPlaceholder"\n      (keyup)="filterKeyUp()"\n      [(ngModel)]="dataStateService.filterText"\n    />\n    <span class="ng-dropdown-input-group-btn" [hidden]="!dataStateService.filterText">\n      <button class="ng-dropdown-delete-button" type="button" (click)="clearFilter()"></button>\n    </span>\n  </div>\n</div>\n<div class="ng-dropdown-divider divider"></div>\n'}]}],e.ctorParameters=function(){return[{type:J},{type:ee},{type:te}]},e}();var ae=function(){function e(e,t,n){this.config=e,this.dataStateService=t,this.eventStateService=n}return e.prototype.optionTrackBy=function(e,t){return t.index},e.prototype.getSelectedState=function(e){var t=this;return"multi"===this.config.selectMode?this.dataStateService.selectedOptions.some(function(n){return O(n,t.config.selectTrackBy)===e}):O(this.dataStateService.selectedOption,this.config.selectTrackBy)===e},e.prototype.onOptionClick=function(e,t){var n=t.target;n&&n.classList&&n.classList.contains("ng-ignore-propagation")||this.toggleOptionSelectedState(e)},e.prototype.onOptionCheckboxClick=function(e,t){"single"===this.config.selectMode&&(O(this.dataStateService.selectedOption,this.config.selectTrackBy)===O(e.option,this.config.selectTrackBy)&&t.preventDefault())},e.prototype.toggleOptionSelectedState=function(e){var t=this,n=O(e.option,this.config.selectTrackBy);switch(this.config.selectMode){case"multi":var i=this.dataStateService.selectedOptions.findIndex(function(e){return O(e,t.config.selectTrackBy)===n});i<0?this.dataStateService.selectedOptions.push(e.option):this.dataStateService.selectedOptions.splice(i,1),this.eventStateService.selectChangeStream.emit(this.dataStateService.selectedOptions);break;case"single-toggle":O(this.dataStateService.selectedOption,this.config.selectTrackBy)===n?this.dataStateService.selectedOption=void 0:this.dataStateService.selectedOption=e.option,this.eventStateService.selectChangeStream.emit(this.dataStateService.selectedOption);break;case"single":var o=O(this.dataStateService.selectedOption,this.config.selectTrackBy);this.dataStateService.selectedOption=e.option,o!==n&&this.eventStateService.selectChangeStream.emit(this.dataStateService.selectedOption)}this.config.closeMenuOnSelect&&this.dataStateService.componentLoaderRef.hide()},e.decorators=[{type:t.Component,args:[{selector:"ng-dropdown-options",template:'<ul class="ng-dropdown-option-container" [class.ng-milti-selectable]="config.selectMode === \'multi\'">\n  <ng-container *ngIf="config.groupByField">\n    <ng-container *ngFor="let groupedOption of dataStateService.dropdownOptionGroups">\n      <li *ngIf="!dataStateService.dropdownOptionGroupHeaderTemplate" class="ng-dropdown-group-heading">\n        {{ groupedOption.groupName }}\n      </li>\n      <ng-container\n        *ngIf="dataStateService.dropdownOptionGroupHeaderTemplate"\n        [ngTemplateOutlet]="dataStateService.dropdownOptionGroupHeaderTemplate"\n        [ngTemplateOutletContext]="{ groupedOption: groupedOption }"\n      >\n      </ng-container>\n      <ng-container *ngFor="let option of groupedOption.options; trackBy: optionTrackBy; let i = index;">\n        <li (click)="onOptionClick(option, $event)" [class.disabled]="option.disabled" [class.ng-option-selected]="getSelectedState(option.id)">\n          <ng-container *ngIf="!dataStateService.dropdownOptionTemplate">\n            <a class="ng-dropdown-checkbox-container" *ngIf="config.showOptionSelectCheckbox">\n              <input type="checkbox" class="ng-dropdown-checkbox-input ng-ignore-propagation"\n                     [id]="dataStateService.getUniqueId(\'gop\', i)"\n                     [checked]="getSelectedState(option.id)"\n                     [disabled]="option.disabled"\n                     (change)="toggleOptionSelectedState(option)"\n                     (click)="onOptionCheckboxClick(option, $event)"\n              />\n              <label class="ng-ignore-propagation" [for]="dataStateService.getUniqueId(\'gop\', i)">\n                <span class="ng-ignore-propagation" [title]="option.text">{{ option.text }}</span>\n              </label>\n            </a>\n            <span *ngIf="!config.showOptionSelectCheckbox" [title]="option.text">\n              <span *ngIf="config.showOptionIndex">{{option.index}} -</span>\n              <span *ngIf="config.showOptionTrackBy">{{option.id}} - </span>{{ option.text }}\n            </span>\n          </ng-container>\n          <ng-container\n            *ngIf="dataStateService.dropdownOptionTemplate"\n            [ngTemplateOutlet]="dataStateService.dropdownOptionTemplate"\n            [ngTemplateOutletContext]="{ option: option, selected: getSelectedState(option.id) }"\n          >\n          </ng-container>\n        </li>\n      </ng-container>\n    </ng-container>\n  </ng-container>\n  <ng-container *ngIf="!config.groupByField">\n    <ng-container *ngFor="let option of dataStateService.dropdownOptions; trackBy: optionTrackBy; index as i;">\n      <li (click)="onOptionClick(option, $event)" [class.disabled]="option.disabled" [class.ng-option-selected]="getSelectedState(option.id)">\n        <ng-container *ngIf="!dataStateService.dropdownOptionTemplate">\n          <a class="ng-dropdown-checkbox-container" *ngIf="config.showOptionSelectCheckbox">\n            <input type="checkbox" class="ng-dropdown-checkbox-input ng-ignore-propagation"\n                   [id]="dataStateService.getUniqueId(\'sop\', i)"\n                   [checked]="getSelectedState(option.id)"\n                   [disabled]="option.disabled"\n                   (change)="toggleOptionSelectedState(option)"\n                   (click)="onOptionCheckboxClick(option, $event)"\n            />\n            <label class="ng-ignore-propagation" [for]="dataStateService.getUniqueId(\'sop\', i)">\n              <span class="ng-ignore-propagation" [title]="option.text">{{ option.text }}</span>\n            </label>\n          </a>\n          <span *ngIf="!config.showOptionSelectCheckbox" [title]="option.text">\n              <span *ngIf="config.showOptionIndex">{{option.index}} -</span>\n              <span *ngIf="config.showOptionTrackBy">{{option.id}} - </span>{{ option.text }}\n            </span>\n        </ng-container>\n        <ng-container\n          *ngIf="dataStateService.dropdownOptionTemplate"\n          [ngTemplateOutlet]="dataStateService.dropdownOptionTemplate"\n          [ngTemplateOutletContext]="{ option: option, selected: getSelectedState(option.id) }"\n        >\n        </ng-container>\n      </li>\n    </ng-container>\n  </ng-container>\n  <li *ngIf="!dataStateService.dataLoading && dataStateService.totalOptionCount === 0" class="ng-dropdown-no-data">\n    {{ config.translations.noDataMessage }}\n  </li>\n</ul>\n'}]}],e.ctorParameters=function(){return[{type:J},{type:ee},{type:te}]},e}();var ce=[oe,ne,re,ae],se=function(){function e(){}return e.forRoot=function(t){return{ngModule:e,providers:[{provide:Y,useValue:t}]}},e.decorators=[{type:t.NgModule,args:[{imports:[n.CommonModule,i.FormsModule,L.forRoot()],declarations:d(ce),exports:[oe],entryComponents:[ne]}]}],e}(),le=[A,S,V,G,q,N,H,U,b,v,W,$,K],pe=[Z,Q,X],de=[],ue=function(){function e(){}return e.forRoot=function(t){return{ngModule:e,providers:[{provide:u,useValue:t}]}},e.decorators=[{type:t.NgModule,args:[{imports:[n.CommonModule,i.FormsModule,L.forRoot(),se.forRoot()],declarations:d(le,pe),providers:d(de),exports:[S,N],entryComponents:[H]}]}],e}(),he=function(){function e(){}return e.prototype.mapQueryParams=function(e){if(e&&e.params){if(e.params instanceof a.HttpParams)return e.params;var t=new a.HttpParams;for(var n in e.params)e.params.hasOwnProperty(n)&&(t=t.set(n,e.params[n]));return t}return new a.HttpParams},e.prototype.mapRequestOptions=function(e){var t={url:"",options:{}};return"object"==typeof e?(t.options=e,t.url=e.url):t.url=e,t},e.decorators=[{type:t.Injectable}],e}(),fe=function(){function e(){}return e.decorators=[{type:t.Injectable}],e}(),ge=[he],Se=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[fe]}},e.decorators=[{type:t.NgModule,args:[{imports:[],providers:d(ge)}]}],e}(),me=function(){function e(){}return e.decorators=[{type:t.Injectable}],e}(),be=function(){function e(e,t){this.http=e,this.requestParamMapperService=t}return e.prototype.onDataBind=function(e,t){var n=this;return function(i){var o=n.requestParamMapperService.mapRequestOptions(e),r=n.requestParamMapperService.mapQueryParams(o.options);if(i){void 0!==i.limit&&(r=r.set("limit",String(i.limit))),void 0!==i.offset&&(r=r.set("offset",String(i.offset))),i.fields.forEach(function(e){var t="";e.filterable&&("string"==typeof e.filterValue?""!==e.filterValue&&(t+=e.filterValue):Array.isArray(e.filterValue)&&e.filterValue.length&&(t+=e.filterValue.join(","))),e.sortable&&""!==e.sortOrder&&(t+="|"+e.sortOrder+"|"+e.sortPriority),t&&(r=r.set(e.field,t))}),o.options.params=r;var a=n.http.get(o.url,o.options);return t?t(a):a}}},e.prototype.onFilterValueExtract=function(e,t){var n=this;return function(i){var o=n.requestParamMapperService.mapRequestOptions(e),r=n.requestParamMapperService.mapQueryParams(o.options),a=i.filterField||i.field;r=r.set("field",a);var c=n.http.get(o.url,s({params:r},o));return t?t(c):c}},e}();var ye=function(){function e(e,t){this.http=e,this.requestParamMapperService=t}return e.prototype.getResourceProvider=function(){return new be(this.http,this.requestParamMapperService)},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:a.HttpClient},{type:he}]},e}();var ve=function(){function e(){}return e.prototype.init=function(e){this.socket=c.webSocket(e),this.subject=new o.Subject},Object.defineProperty(e.prototype,"socketStream",{get:function(){return this.socket},enumerable:!0,configurable:!0}),e.prototype.onDataBind=function(e){var t=this;if(!this.socket)throw Error("Initialize socket data source before data bind.");return this.socketSubscription=this.socket.subscribe(this.subject),function(n){if(n)return t.socket.next({type:"data-fetch",offset:n.offset,limit:n.limit,fields:n.fields}),e?e(t.subject):t.subject}},e.prototype.dispose=function(){this.socket&&this.socket.complete(),this.socketSubscription&&this.socketSubscription.unsubscribe(),this.subject&&this.subject.unsubscribe()},e}();var we=function(){function e(){}return e.prototype.getResourceProvider=function(){return new ve},e.decorators=[{type:t.Injectable}],e}(),Oe=[ye,we],Ce=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[me]}},e.decorators=[{type:t.NgModule,args:[{imports:[Se],providers:d(Oe)}]}],e}(),Re=function(){function e(){}return e.decorators=[{type:t.Injectable}],e}(),Ie=function(){function e(e,t){this.http=e,this.requestParamMapperService=t}return e.prototype.onDataBind=function(e,t){var n=this;return function(i){var o=n.requestParamMapperService.mapRequestOptions(e),r=n.requestParamMapperService.mapQueryParams(o.options);if(i){void 0!==i.limit&&(r=r.set("limit",String(i.limit))),void 0!==i.offset&&(r=r.set("offset",String(i.offset))),i.filter&&i.filter.value&&(r=(r=r.set("field",i.filter.key)).set("filter",i.filter.value)),o.options.params=r;var a=n.http.get(o.url,o.options);return t?t(a):a}}},e}();var xe=function(){function e(e,t){this.http=e,this.requestParamMapperService=t}return e.prototype.getResourceProvider=function(){return new Ie(this.http,this.requestParamMapperService)},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:a.HttpClient},{type:he}]},e}();var De=function(){function e(){}return e.prototype.init=function(e){this.socket=c.webSocket(e),this.subject=new o.Subject},Object.defineProperty(e.prototype,"socketStream",{get:function(){return this.socket},enumerable:!0,configurable:!0}),e.prototype.onDataBind=function(e){var t=this;if(!this.socket)throw Error("Initialize socket data source before data bind.");return this.socketSubscription=this.socket.subscribe(this.subject),function(n){if(n)return t.socket.next({type:"data-fetch",filter:n.filter,offset:n.offset,limit:n.limit}),e?e(t.subject):t.subject}},e.prototype.dispose=function(){this.socket&&this.socket.complete(),this.socketSubscription&&this.socketSubscription.unsubscribe(),this.subject&&this.subject.unsubscribe()},e}();var Pe=function(){function e(){}return e.prototype.getResourceProvider=function(){return new De},e.decorators=[{type:t.Injectable}],e}(),Fe=[xe,Pe],Te=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[Re]}},e.decorators=[{type:t.NgModule,args:[{imports:[Se],providers:d(Fe)}]}],e}();e.DataFetchMode=m,e.DataTableColumnComponent=S,e.DataTableComponent=N,e.DataTableHttpDataFetchService=be,e.DataTableHttpResourceFactoryService=ye,e.DataTableModule=ue,e.DataTableResourceModule=Ce,e.DataTableWebsocketDataFetchService=ve,e.DataTableWebsocketResourceFactoryService=we,e.DragAndDropService=D,e.DropdownComponent=oe,e.DropdownHttpDataFetchService=Ie,e.DropdownHttpResourceFactoryService=xe,e.DropdownModule=se,e.DropdownResourceModule=Te,e.DropdownWebsocketDataFetchService=De,e.DropdownWebsocketResourceFactoryService=Pe,e.GlobalRefService=P,e.PopoverComponentLoader=T,e.PopoverComponentLoaderFactoryService=k,e.RequestParamMapperService=he,e.ResourceUtilityModule=Se,e.UtilityConfigService=x,e.UtilityModule=L,e.ɵa=C,e.ɵb=R,e.ɵba=U,e.ɵbb=b,e.ɵbc=v,e.ɵbd=W,e.ɵbe=$,e.ɵbf=K,e.ɵbg=Z,e.ɵbh=Q,e.ɵbi=X,e.ɵbj=fe,e.ɵbk=me,e.ɵbl=Re,e.ɵc=I,e.ɵd=F,e.ɵe=E,e.ɵf=Y,e.ɵg=J,e.ɵh=ee,e.ɵi=te,e.ɵj=ie,e.ɵk=ne,e.ɵl=re,e.ɵm=ae,e.ɵn=A,e.ɵo=f,e.ɵp=g,e.ɵq=u,e.ɵr=h,e.ɵt=V,e.ɵu=G,e.ɵv=q,e.ɵw=z,e.ɵx=y,e.ɵy=_,e.ɵz=H,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ornamentum.umd.min.js.map